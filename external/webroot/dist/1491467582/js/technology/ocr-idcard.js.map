{"version":3,"sources":["webpack:///./src/component/widget/alertModal.js","webpack:///./src/model/demoAPI.js","webpack:///./ai_images/technology/ocr-idcard/demo-card-1.png","webpack:///./ai_images/technology/ocr-idcard/demo-card-2.png","webpack:///./ai_images/technology/ocr-idcard/demo-card-3.png","webpack:///./ai_images/technology/ocr-idcard/demo-card-4.png","webpack:///./ai_images/technology/ocr-idcard/demo-card-5.png","webpack:///./ai_images/technology/ocr-idcard/demo-card-6.png","webpack:///./src/entry/technology/ocr-idcard.js","webpack:///./src/component/widget/demoCanvas.js","webpack:///./src/less/technology/ocr-idcard.less","webpack:///./ai_images/error/image-format.png","webpack:///./ai_images/error/not-found.png","webpack:///./ai_images/error/too-large.png","webpack:///./src/view/technology/ocr-idcard.html?f372","webpack:///./src/view/technology/ocr-idcard.html","webpack:///./src/partials/modal/alert.hbs"],"names":["AlertModal","content","title","init","html","id","container","append","bindEvent","getModal","hide","remove","removeClass","modal","on","e","preventDefault","scanIDCard","scanBankCard","scanGeneralText","scanFace","scanPornography","getHeader","evaluateWakeWords","exportWakeWords","synthesizeSpeech","image","imageUrl","success","noop","fail","post","type","action","words","kw","window","open","data","speed","vol","person","text","demoImgPath","require","document","ready","click","each","i","toggleClass","index","scroll","scrollTop","trigger","one","addClass","setTimeout","isScanning","resetDemo","empty","val","attr","ID_CARD_KEY_MAP","startScan","imgSrc","url","options","res","JSON","stringify","errno","indexOf","msg","hasNoResult","Object","keys","words_result","forEach","key","find","xhr","status","statusText","change","file","files","selector","hasClass","apiType","$demoCartList","item","location","protocol","toCheck","notFoundImg","formatImg","tooLargeImg","DemoCanvas","scale","context","Image","onerror","promise","checkByUrl","stream","checkByStream","then","onload","render","src","resultImg","errorImg","dfd","Deferred","contentType","contentSize","reject","test","resolve","image_data","reader","FileReader","readAsDataURL","size","target","result","isSuccessful","cWidth","width","cHeight","height","iWidth","iHeight","canvas","ctx","getContext","drawImage","wRatio","hRatio","scaleRatio","css"],"mappings":"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","file":"1491467582/js/technology/ocr-idcard.js","sourcesContent":["/**\r\n * @file 提示模态框容器\r\n * @author shiliang@baidu.com\r\n */\r\n\r\nimport $ from 'jquery';\r\nimport Modal from '../common/modal';\r\n\r\nimport alertModalTpl from 'partials/modal/alert.hbs';\r\n\r\nexport default class AlertModal extends Modal {\r\n    constructor(content) {\r\n        super();\r\n        this.title = '提示';\r\n        this.content = content || '';\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        const html = alertModalTpl(\r\n            {\r\n                id: this.id,\r\n                title: this.title,\r\n                content: this.content\r\n            }\r\n        );\r\n        $(this.container).append(html);\r\n        this.bindEvent();\r\n        super.show();\r\n    }\r\n\r\n    hide() {\r\n        this.getModal().hide().remove();\r\n        $('body').removeClass('modal-show');\r\n    }\r\n\r\n    bindEvent() {\r\n        super.bindEvent();\r\n        let modal = this.getModal();\r\n\r\n        modal.on('click', 'button.cancel', e => {\r\n            e.preventDefault();\r\n            this.hide();\r\n        });\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/component/widget/alertModal.js","/**\r\n * @file demo API接口定义\r\n * @author shiliang@baidu.com\r\n */\r\n\r\nimport $ from 'jquery';\r\n\r\nexport function scanIDCard({image = null, imageUrl = null, success = $.noop, fail = $.noop}) {\r\n    $.post('/aidemo', {\r\n        type: 'idcard',\r\n        image: image,\r\n        'image_url': imageUrl\r\n    }).success(success).fail(fail);\r\n}\r\n\r\nexport function scanBankCard({image = null, imageUrl = null, success = $.noop, fail = $.noop}) {\r\n    $.post('/aidemo', {\r\n        type: 'bankcard',\r\n        image: image,\r\n        'image_url': imageUrl\r\n    }).success(success).fail(fail);\r\n}\r\n\r\nexport function scanGeneralText({image = null, imageUrl = null, success = $.noop, fail = $.noop}) {\r\n    $.post('/aidemo', {\r\n        type: 'commontext',\r\n        image: image,\r\n        'image_url': imageUrl\r\n    }).success(success).fail(fail);\r\n}\r\n\r\nexport function scanFace({image = null, imageUrl = null, success = $.noop, fail = $.noop}) {\r\n    $.post('/aidemo', {\r\n        type: 'face',\r\n        image: image,\r\n        'image_url': imageUrl\r\n    }).success(success).fail(fail);\r\n}\r\n\r\nexport function scanPornography({image = null, imageUrl = null, success = $.noop, fail = $.noop}) {\r\n    $.post('/aidemo', {\r\n        type: 'pornography',\r\n        image: image,\r\n        'image_url': imageUrl\r\n    }).success(success).fail(fail);\r\n}\r\n\r\nexport function getHeader({imageUrl = null, type, success = $.noop, fail = $.noop}) {\r\n    $.post('/aidemo', {\r\n        action: 'getHeader',\r\n        type: type,\r\n        'image_url': imageUrl\r\n    }).success(success).fail(fail);\r\n}\r\n\r\nexport function evaluateWakeWords({words = null, success = $.noop, fail = $.noop}) {\r\n    $.post('/aidemo', {\r\n        type: 'wakescore',\r\n        kw: words\r\n    }).success(success).fail(fail);\r\n}\r\n\r\nexport function exportWakeWords({words = null, success = $.noop}) {\r\n    window.open('/aidemo?type=wakedownload&kw=' + words, '_blank');\r\n    success();\r\n}\r\n\r\nexport function synthesizeSpeech({data = {}, success = $.noop, fail = $.noop}) {\r\n    $.post('/aidemo', {\r\n        type: 'tts',\r\n        speed: data.speed,\r\n        vol: data.vol,\r\n        person: data.person,\r\n        text: data.text\r\n    }).success(success).fail(fail);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/demoAPI.js","module.exports = \"/ai_dist/1491467582/ai_images/technology/ocr-idcard/demo-card-1.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ai_images/technology/ocr-idcard/demo-card-1.png\n// module id = 10\n// module chunks = 0","module.exports = \"/ai_dist/1491467582/ai_images/technology/ocr-idcard/demo-card-2.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ai_images/technology/ocr-idcard/demo-card-2.png\n// module id = 11\n// module chunks = 0","module.exports = \"/ai_dist/1491467582/ai_images/technology/ocr-idcard/demo-card-3.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ai_images/technology/ocr-idcard/demo-card-3.png\n// module id = 12\n// module chunks = 0","module.exports = \"/ai_dist/1491467582/ai_images/technology/ocr-idcard/demo-card-4.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ai_images/technology/ocr-idcard/demo-card-4.png\n// module id = 13\n// module chunks = 0","module.exports = \"/ai_dist/1491467582/ai_images/technology/ocr-idcard/demo-card-5.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ai_images/technology/ocr-idcard/demo-card-5.png\n// module id = 14\n// module chunks = 0","module.exports = \"/ai_dist/1491467582/ai_images/technology/ocr-idcard/demo-card-6.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ai_images/technology/ocr-idcard/demo-card-6.png\n// module id = 15\n// module chunks = 0","/**\r\n * @file ocr-身份证识别脚本入口\r\n * @author shiliang@baidu.com\r\n */\r\n\r\nimport $ from 'jquery';\r\nimport throttle from 'lodash.throttle';\r\nimport DemoCanvas from '../../component/widget/demoCanvas';\r\nimport {scanIDCard} from '../../model/demoAPI';\r\nimport AlertModal from '../../component/widget/alertModal';\r\n\r\nimport 'less/technology/ocr-idcard.less';\r\n\r\n/* eslint-disable */\r\nconst demoImgPath = [\r\n    require('../../../ai_images/technology/ocr-idcard/demo-card-1.png'),\r\n    require('../../../ai_images/technology/ocr-idcard/demo-card-2.png'),\r\n    require('../../../ai_images/technology/ocr-idcard/demo-card-3.png'),\r\n    require('../../../ai_images/technology/ocr-idcard/demo-card-4.png'),\r\n    require('../../../ai_images/technology/ocr-idcard/demo-card-5.png'),\r\n    require('../../../ai_images/technology/ocr-idcard/demo-card-6.png')\r\n];\r\nimport '!file-loader?name=./../../template/cloud/[name].html!extract-loader!html-loader!view/technology/ocr-idcard.html';\r\n/* eslint-enable */\r\n\r\n$(document).ready(function () {\r\n    // case点击效果\r\n    $('.case-indicator > li').click(function () {\r\n        $('.case-indicator > li').each((i, e) => {\r\n            $(e).toggleClass('active', i === $(this).index());\r\n        });\r\n        $('.case-item').each((i, e) => {\r\n            $(e).toggleClass('active', i === $(this).index());\r\n        });\r\n    });\r\n\r\n    // 触发功能介绍动画\r\n    $(window).scroll(\r\n        throttle(\r\n            () => {\r\n                if ($(document).scrollTop() >= 100) {\r\n                    $('.tech-intro-detail').trigger('demo');\r\n                }\r\n            },\r\n            300\r\n        )\r\n    );\r\n\r\n    // 绑定功能介绍动画\r\n    $('.tech-intro-detail').one('demo', function () {\r\n        $('.original-card').addClass('scanning');\r\n        setTimeout(function () {\r\n            $('.original-card').removeClass('scanning').addClass('scanned');\r\n            $('.scan-result').addClass('scanned');\r\n        }, 3000);\r\n    });\r\n\r\n    // 线上demo开始\r\n    let isScanning = false;\r\n    let resetDemo = () => {\r\n        $('#demo-json > p').empty();\r\n        $('#demo-photo-upload  > input').val('');\r\n        $('#demo-result .result-background').attr('class', 'result-background');\r\n        $('#demo-photo-upload, #scan-photo').removeClass('disabled');\r\n        isScanning = false;\r\n    };\r\n\r\n    const ID_CARD_KEY_MAP = {\r\n        '住址': 'address',\r\n        '公民身份号码': 'card-no',\r\n        '出生': 'birthday',\r\n        '民族': 'folk',\r\n        '性别': 'gender',\r\n        '姓名': 'name',\r\n        '女': 'female',\r\n        '男': 'male'\r\n    };\r\n\r\n    let startScan = function (type, imgSrc, url) {\r\n        $('#demo-json > p').empty();\r\n        $('#demo-result .result-background').attr('class', 'result-background loading');\r\n        let options = {\r\n            success(res) {\r\n                $('#demo-photo-upload, #scan-photo').removeClass('disabled');\r\n                $('#demo-json > p').html(JSON.stringify(res, null, '\\t'));\r\n                $('#demo-result .result-background').removeClass('loading');\r\n\r\n                if (res.errno !== 0) {\r\n                    $('#demo-result .result-background').toggleClass('has-result man female', false)\r\n                        .toggleClass('error-upload-fail', res.errno === 107)\r\n                        .toggleClass('error-timeout', res.errno === 28)\r\n                        .toggleClass('error-image-format', res.errno === 106);\r\n                    isScanning = false;\r\n                    if ([106, 107, 28].indexOf(res.errno) === -1) {\r\n                        new AlertModal(res.msg);\r\n                    }\r\n                    return false;\r\n                }\r\n                let hasNoResult = true;\r\n                Object.keys(res.data.words_result).forEach(key => {\r\n                    let words = res.data.words_result[key].words;\r\n                    hasNoResult = hasNoResult && !words;\r\n                    $('#demo-result .result-background').find('.' + ID_CARD_KEY_MAP[key]).html(words);\r\n                    if (key === '性别') {\r\n                        $('#demo-result .result-background').toggleClass(ID_CARD_KEY_MAP[words] || '', true);\r\n                    }\r\n                });\r\n\r\n                $('#demo-result .result-background')\r\n                    .toggleClass('has-result', !hasNoResult)\r\n                    .toggleClass('error-no-result', hasNoResult);\r\n                isScanning = false;\r\n            },\r\n            fail(xhr) {\r\n                new AlertModal('接口发生错误：' + xhr.status + ' - ' + xhr.statusText);\r\n                resetDemo();\r\n            }\r\n        };\r\n        if (type === 'url') {\r\n            options.imageUrl = url;\r\n        }\r\n        else if (type === 'stream') {\r\n            options.image = imgSrc;\r\n        }\r\n\r\n        scanIDCard(options);\r\n    };\r\n\r\n    // 上传图片\r\n    $('#demo-photo-upload  > input').change(function (e) {\r\n        if ($(this).val() === '') {\r\n            return false;\r\n        }\r\n        if (isScanning) {\r\n            new AlertModal('操作正在进行中，请稍候再试！');\r\n            return;\r\n        }\r\n        isScanning = true;\r\n        $('#demo-photo-upload, #scan-photo').addClass('disabled');\r\n        let file = $(this)[0].files[0];\r\n        new DemoCanvas({\r\n            selector: '#demo-origin',\r\n            image: file,\r\n            type: 'stream',\r\n            success(imgSrc) {\r\n                $('#demo-photo-upload  > input').val('');\r\n                startScan('stream', imgSrc);\r\n            },\r\n            fail: resetDemo\r\n        });\r\n    });\r\n\r\n    // demo 检测输入框事件绑定\r\n    $('#demo-photo-url').change(function () {\r\n        $('.demo-card-list > li').removeClass('active');\r\n    });\r\n\r\n    // 检测按钮事件\r\n    $('#scan-photo').click(function () {\r\n        if (isScanning) {\r\n            new AlertModal('操作正在进行中，请稍候再试！');\r\n            return;\r\n        }\r\n        if ($(this).hasClass('disabled') || !$('#demo-photo-url').val()) {\r\n            return false;\r\n        }\r\n        isScanning = true;\r\n        $('#demo-photo-upload, #scan-photo').addClass('disabled');\r\n        let url = $('#demo-photo-url').val();\r\n        new DemoCanvas({\r\n            selector: '#demo-origin',\r\n            image: url,\r\n            type: 'url',\r\n            apiType: 'idcard',\r\n            success(imgSrc) {\r\n                startScan('url', imgSrc, url);\r\n            },\r\n            fail: resetDemo\r\n        });\r\n    });\r\n\r\n    // 阻止多次上传\r\n    $('#demo-photo-upload').click(function () {\r\n        if ($(this).hasClass('disabled')) {\r\n            return false;\r\n        }\r\n    });\r\n\r\n    const $demoCartList = $('.demo-card-list > li');\r\n\r\n    $demoCartList.each(function (index, item) {\r\n        $(item)\r\n            .find('img')\r\n            .attr('src', `${demoImgPath[index]}`);\r\n    });\r\n\r\n    // 绑定实例图点击事件\r\n    $demoCartList.click(function () {\r\n        if (isScanning) {\r\n            new AlertModal('操作正在进行中，请稍候再试！');\r\n            return;\r\n        }\r\n        isScanning = true;\r\n        $('.demo-card-list > li').removeClass('active');\r\n        $(this).addClass('active');\r\n        let url = `${window.location.protocol}${$(this).find('img').attr('src')}`;\r\n        $('#demo-photo-upload, #scan-photo').addClass('disabled');\r\n        new DemoCanvas({\r\n            selector: '#demo-origin',\r\n            image: url,\r\n            type: 'url',\r\n            toCheck: false,\r\n            success(imgSrc) {\r\n                startScan('url', imgSrc, url);\r\n            },\r\n            fail: resetDemo\r\n        });\r\n    });\r\n\r\n    // 触发初始化效果\r\n    $('.demo-card-list > li')[0].click();\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/entry/technology/ocr-idcard.js","/**\r\n * @file 用于绘制根据图片识别返回数据绘制图片的插件\r\n * @author shiliang@baidu.com\r\n */\r\n\r\nimport $ from 'jquery';\r\nimport {getHeader} from '../../model/demoAPI';\r\nimport AlertModal from './alertModal';\r\n\r\n/* eslint-disable */\r\nconst notFoundImg = require('../../../ai_images/error/not-found.png');\r\nconst formatImg = require('../../../ai_images/error/image-format.png');\r\nconst tooLargeImg = require('../../../ai_images/error/too-large.png');\r\n/* eslint-enable */\r\n\r\nexport default class DemoCanvas {\r\n    constructor({selector, image, type, apiType, toCheck = true, scale = 1, success, fail}) {\r\n        if (!$(selector).context) {\r\n            throw 'DemoCanvas：未寻找到容器!';\r\n        }\r\n\r\n        this.container = $(selector);\r\n        this.type = type;\r\n        this.scale = scale;\r\n        this.apiType = apiType;\r\n        this.image = new Image();\r\n        this.success = success || $.noop;\r\n        this.fail = fail || $.noop;\r\n\r\n        this.image.onerror = () => {\r\n            this.fail();\r\n            new AlertModal('图片加载失败，请重试');\r\n        };\r\n\r\n        if (toCheck) {\r\n            let promise = {\r\n                url: this.checkByUrl,\r\n                stream: this.checkByStream\r\n            }[this.type](image, apiType);\r\n\r\n            promise.then(\r\n                resultImg => {\r\n                    this.image.onload = () => {\r\n                        this.render(true);\r\n                    };\r\n                    this.image.src = resultImg;\r\n                },\r\n                errorImg => {\r\n                    this.image.onload = () => {\r\n                        this.render(false);\r\n                    };\r\n                    this.image.src = errorImg;\r\n                }\r\n            );\r\n        }\r\n        else {\r\n            this.image.onload = () => {\r\n                this.render(true);\r\n            };\r\n            this.image.src = image;\r\n        }\r\n    }\r\n\r\n    checkByUrl(image, apiType) {\r\n        let dfd = $.Deferred();\r\n\r\n        getHeader({\r\n            imageUrl: image,\r\n            type: apiType,\r\n            success(res) {\r\n                let contentType = res.data['Content-Type'];\r\n                let contentSize = res.data['Content-Length'];\r\n                if ((!contentType && !contentSize) || res.errno !== 0) {\r\n                    // console.error('此错误可能是由于图片的同源策略造成的!');\r\n                    dfd.reject(notFoundImg);\r\n                    return;\r\n                }\r\n                if (!/image\\/(png|bmp|jpg|jpeg)/.test(contentType)) {\r\n                    dfd.reject(formatImg);\r\n                    return;\r\n                }\r\n                if (contentSize > 2 * 1024 * 1024) {\r\n                    dfd.reject(tooLargeImg);\r\n                    return;\r\n                }\r\n                dfd.resolve(res.data.image_data);\r\n            },\r\n            fail() {\r\n                dfd.reject(notFoundImg);\r\n            }\r\n        });\r\n\r\n        return dfd.promise();\r\n    }\r\n\r\n    checkByStream(image) {\r\n        let dfd = $.Deferred();\r\n        let reader = new FileReader();\r\n        if (!image) {\r\n            dfd.reject(notFoundImg);\r\n            return dfd.promise();\r\n        }\r\n        reader.readAsDataURL(image);\r\n        reader.onload = e => {\r\n            if (!/image\\/(png|bmp|jpeg)/.test(image.type)) {\r\n                dfd.reject(formatImg);\r\n                return false;\r\n            }\r\n            if (image.size > 2 * 1024 * 1024) {\r\n                dfd.reject(tooLargeImg);\r\n                return false;\r\n            }\r\n            dfd.resolve(e.target.result);\r\n        };\r\n        reader.onerror = () => {\r\n            dfd.reject(notFoundImg);\r\n        };\r\n\r\n        return dfd.promise();\r\n    }\r\n\r\n    render(isSuccessful) {\r\n        let cWidth = this.container.width();\r\n        let cHeight = this.container.height();\r\n        let iWidth = this.image.width;\r\n        let iHeight = this.image.height;\r\n\r\n        let canvas = $('<canvas>您的浏览器暂时不支持canvas，请选用现代浏览器！</canvas>').attr('width', iWidth)\r\n            .attr('height', iHeight);\r\n        let ctx = canvas[0].getContext('2d');\r\n        ctx.drawImage(this.image, 0, 0);\r\n\r\n        let wRatio = iWidth / cWidth;\r\n        let hRatio = iHeight / cHeight;\r\n\r\n        // 图片缩放\r\n        const scaleRatio = this.scale * ((wRatio > 1 || hRatio > 1)\r\n                ? (1 / (wRatio >= hRatio ? wRatio : hRatio))\r\n                : 1);\r\n\r\n        canvas.css({\r\n            'position': 'relative',\r\n            'left': '50%',\r\n            'top': '50%',\r\n            '-webkit-transform': 'translate(-50%, -50%) scale(' + scaleRatio + ')',\r\n            '-moz-transform': 'translate(-50%, -50%) scale(' + scaleRatio + ')',\r\n            '-o-transform': 'translate(-50%, -50%) scale(' + scaleRatio + ')',\r\n            'transform': 'translate(-50%, -50%) scale(' + scaleRatio + ')'\r\n        });\r\n\r\n        canvas.attr('data-scale', scaleRatio);\r\n        this.container.empty().append(canvas);\r\n\r\n        if (isSuccessful) {\r\n            this.success(this.image.src);\r\n        }\r\n        else {\r\n            this.fail();\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/component/widget/demoCanvas.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/less/technology/ocr-idcard.less\n// module id = 30\n// module chunks = 0","module.exports = \"/ai_dist/1491467582/ai_images/error/image-format.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ai_images/error/image-format.png\n// module id = 31\n// module chunks = 0","module.exports = \"/ai_dist/1491467582/ai_images/error/not-found.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ai_images/error/not-found.png\n// module id = 32\n// module chunks = 0","module.exports = \"/ai_dist/1491467582/ai_images/error/too-large.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ai_images/error/too-large.png\n// module id = 33\n// module chunks = 0","module.exports = __webpack_public_path__ + \"./../../template/cloud/ocr-idcard.html\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/file-loader?name=./../../template/cloud/[name].html!./~/extract-loader/lib/extractLoader.js!./~/html-loader!./src/view/technology/ocr-idcard.html\n// module id = 36\n// module chunks = 0","null\n\n\n// WEBPACK FOOTER //\n// ../template/cloud/[name].html!./~/extract-loader/lib/extractLoader.js!./~/html-loader!./src/view/technology/ocr-idcard.html","var Handlebars = require(\"D:\\\\platfrom\\\\platform\\\\external\\\\webroot\\\\node_modules\\\\handlebars\\\\runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<div class=\\\"ai-modal alert\\\" id=\\\"\"\n    + alias4(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\r\\n    <header class=\\\"modal-header\\\">\\r\\n        <h3>\"\n    + alias4(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</h3>\\r\\n        <a class=\\\"modal-x\\\"></a>\\r\\n    </header>\\r\\n    <section class=\\\"modal-content\\\">\\r\\n        <div style=\\\"text-align: center; color: #666;font-size: 14px;margin-bottom: 20px;\\\">\\r\\n            \"\n    + ((stack1 = ((helper = (helper = helpers.content || (depth0 != null ? depth0.content : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"content\",\"hash\":{},\"data\":data}) : helper))) != null ? stack1 : \"\")\n    + \"\\r\\n        </div>\\r\\n        <div style=\\\"text-align: center;\\\">\\r\\n            <button type=\\\"button\\\" class=\\\"btn-normal cancel\\\">确定</button>\\r\\n        </div>\\r\\n    </section>\\r\\n</div>\\r\\n\";\n},\"useData\":true});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/partials/modal/alert.hbs\n// module id = 41\n// module chunks = 0"],"sourceRoot":""}