{
  "html": "<h1 id=\"cd06e5ea\">简介</h1><h2 id=\"43deb8d8\">概念解释</h2><p>语音合成是实现人机语音交互，建立一个有听和讲能力的交互系统所必需的关键技术。随着语音技术的发展，百度自主研发了语音合成系统（TTS），功能是接收用户发送的文本，生成语音发送给用户。 对本文中将提到的名词约定如下：</p><p><strong>语音合成（Text To Speech，TTS）</strong>：将文本合成为语音，即声音文件。</p><p><strong>合成引擎</strong>：将文本合成为语音的核心模块。</p><p><strong>百度语音合成SDK（BDTTSClient）</strong>：本开发包。BDTTSClient是一个封装了网络首发、音频播放功能的语音合成解决方案。借助BDTTSClient可以在应用程序中快速集成语音合成功能。</p><h2 id=\"9d041643\">功能介绍</h2><p>百度语音合成客户端Android版SDK是一种面向Android移动设备的语音合成解决方案，以JAR包 + SO库的形式发布。目前版本已支持SDK内部直接播放合成语音和从SDK获取语音数据，并支持男女声、语速、音调、音量、音频码率设置，后续版本讲支持更多参数设置（最新信息请参见百度语音官网）。</p><h2 id=\"a6756766\">兼容性</h2><p>系统：支持Android 2.3（API Level 9）及以上系统。需要开发者通过minSdkVersion来保证支持系统的检测。</p><p>机型：手机和平板均可。</p><p>构架：支持arm64-v8a，armeabi，armeabi-v7a，x86，x86_64。</p><p>网络：支持WIFI及移动网络，支持2G、3G、4G移动网络。</p><h2 id=\"f2f68da5\">开发包说明</h2><table><thead><tr><th style=\"text-align:left\">文件（夹）名</th><th style=\"text-align:left\">说明</th></tr></thead><tbody><tr><td style=\"text-align:left\">doc/百度语音离在线合成Android版开发手册.pdf</td><td style=\"text-align:left\">本文档</td></tr><tr><td style=\"text-align:left\">doc/javaDoc</td><td style=\"text-align:left\">Javadoc</td></tr><tr><td style=\"text-align:left\">libs</td><td style=\"text-align:left\">语音合成SDK Lib库，包括各平台的so库及Jar包</td></tr><tr><td style=\"text-align:left\">BaiduTtsSample</td><td style=\"text-align:left\">开发示例(Eclipse project)</td></tr><tr><td style=\"text-align:left\">data</td><td style=\"text-align:left\">语音合成资源文件</td></tr><tr><td style=\"text-align:left\">license</td><td style=\"text-align:left\">授权文件</td></tr></tbody></table><h1 id=\"f58c080b\">集成指南</h1><p>本章将讲解如何快速地集成BDTTSClient到现有应用中。</p><h2 id=\"d565cc41\">创建应用</h2><p>请参考《百度语音开放平台使用指南》创建应用，开通服务并完成个性化设置。</p><h2 id=\"097fe341\">添加BDTTSClient到工程</h2><p>将开发包中的libs目录整体拷贝到工程目录，libs目录包含了各平台的so库，开发者视应用需要可以进行删减。galaxy_lite.jar是百度Android公共基础库，如果项目中还集成了其它百度SDK，如Push.jar，在打包过程中出现类似如下的错误信息：</p><pre>\n<code class=\"hljs\" lang=\"\">[2015-10-22 11:02:57 - Dex Loader] Unable to<span class=\"hljs-built_in\"> execute </span>dex: Multiple dex files define <span class=\"hljs-class\">Lcom/baidu/android/common/logging/Configuration;</span>\n[2015-10-22 11:02:57 - BaiduTtsSample] Conversion to Dalvik format failed: Unable to<span class=\"hljs-built_in\"> execute </span>dex: Multiple dex files define <span class=\"hljs-class\">Lcom/baidu/android/common/logging/Configuration;</span></code>\n</pre><p>请将此Jar包移除。</p><p>如果Eclipse ADT版本插件低于17，需要手工添加依赖库，添加方法为：Project =&gt; Properties =&gt; Java Build Path =&gt; Libraries =&gt; Add JAR...。</p><h2 id=\"361b4a28\">添加语音合成资源文件</h2><p>将开发包中的data目录下的dat文件放到某一可读路径下，以便设置资源文件参数时使用。</p><h2 id=\"4c92fca9\">添加权限</h2><p>在工程AndroidManifest.xml文件中添加如下权限：</p><pre>\n<code class=\"hljs\" lang=\"\">&lt;uses-permission android:<span class=\"hljs-built_in\">name</span>=<span class=\"hljs-string\">\"android.permission.INTERNET\"</span> /&gt;\n&lt;uses-permission android:<span class=\"hljs-built_in\">name</span>=<span class=\"hljs-string\">\"android.permission.ACCESS_NETWORK_STATE\"</span> /&gt;\n&lt;uses-permission android:<span class=\"hljs-built_in\">name</span>=<span class=\"hljs-string\">\"android.permission.READ_EXTERNAL_STORAGE\"</span> /&gt;\n&lt;uses-permission android:<span class=\"hljs-built_in\">name</span>=<span class=\"hljs-string\">\"android.permission.WRITE_EXTERNAL_STORAGE\"</span> /&gt;\n&lt;uses-permission android:<span class=\"hljs-built_in\">name</span>=<span class=\"hljs-string\">\"android.permission.WRITE_SETTINGS\"</span> /&gt;\n&lt;uses-permission android:<span class=\"hljs-built_in\">name</span>=<span class=\"hljs-string\">\"android.permission.READ_PHONE_STATE\"</span> /&gt;\n&lt;uses-permission android:<span class=\"hljs-built_in\">name</span>=<span class=\"hljs-string\">\"android.permission.MODIFY_AUDIO_SETTINGS\"</span> /&gt;\n&lt;uses-permission android:<span class=\"hljs-built_in\">name</span>=<span class=\"hljs-string\">\"android.permission.ACCESS_WIFI_STATE\"</span> /&gt;\n&lt;uses-permission android:<span class=\"hljs-built_in\">name</span>=<span class=\"hljs-string\">\"android.permission.CHANGE_WIFI_STATE\"</span> /&gt;</code>\n</pre><p>各权限含义说明：</p><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">用途</th></tr></thead><tbody><tr><td style=\"text-align:left\">android.permission. INTERNET</td><td style=\"text-align:left\">允许应用联网</td></tr><tr><td style=\"text-align:left\">android.permission. ACCESS_NETWORK_STATE</td><td style=\"text-align:left\">获取当前网络状态</td></tr><tr><td style=\"text-align:left\">android.permission.READ_EXTERNAL_STORAGE</td><td style=\"text-align:left\">读外部存储</td></tr><tr><td style=\"text-align:left\">android.permission.WRITE_EXTERNAL_STORAGE</td><td style=\"text-align:left\">写外部存储</td></tr><tr><td style=\"text-align:left\">android.permission. WRITE_SETTINGS</td><td style=\"text-align:left\">允许程序读取或写入系统设置</td></tr><tr><td style=\"text-align:left\">android.permission.READ_PHONE_STATE</td><td style=\"text-align:left\">允许程序读取手机状态</td></tr><tr><td style=\"text-align:left\">android.permission. MODIFY_AUDIO_SETTINGS</td><td style=\"text-align:left\">允许程序修改全局声音设置权限</td></tr><tr><td style=\"text-align:left\">android.permission. ACCESS_WIFI_STATE</td><td style=\"text-align:left\">允许应用程序获取WIFI状态</td></tr><tr><td style=\"text-align:left\">android.permission.CHANGE_WIFI_STATE</td><td style=\"text-align:left\">允许应用程序改变WI-FI网络链接状态的权限</td></tr></tbody></table><h2 id=\"96017a06\">Proguard配置</h2><p>请不要混淆sdk的jar包。</p><h1 id=\"67e746d3\">重要接口说明</h1><h2 id=\"4ec5a173\">合成器</h2><p>合成器，类名SpeechSynthesizer，主要用来控制合成进程：设置参数，开始，结束，取消等。</p><h3>创建对象</h3><ul><li><p><strong>说明</strong></p><p>获取语音合成引擎实例。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> SpeechSynthesizer getInstance()</code>\n</pre><ul><li><p><strong>参数</strong></p><p>无。</p></li><li><p><strong>返回</strong></p><p>语音合成引擎实例。</p></li></ul><h3>设置Context</h3><ul><li><p><strong>说明</strong></p><p>设置语音合成实例的上下文环境。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> setContext(Context context)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">context</td><td style=\"text-align:left\">上下文信息</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>无。</p></li></ul><h3>设置监听器</h3><ul><li><p><strong>说明</strong> 设置语音合成监听器，回调合成和播放进度以及错误信息。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> setSpeechSynthesizerListener(SpeechSynthesizerListener speechSynthesizerListener)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">SpeechSynthesizerListener</td><td style=\"text-align:left\">语音合成监听器</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>无。</p></li></ul><h3>初始化TTS引擎</h3><ul><li><p><strong>说明</strong></p><p>初始化合成引擎，可以指定使用online在线，或者mix离在线混合引擎. mix混合引擎会在online在线不能用的情况下自动使用offline离线引擎。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">initTts</span><span class=\"hljs-params\">(TtsMode ttsMode)</span></span></code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">ttsMode</td><td style=\"text-align:left\">引擎选择（online是纯在线合成引擎，Mix是离在线混合引擎）</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p><a href=\"#%E9%94%99%E8%AF%AF%E7%A0%81%E8%AF%B4%E6%98%8E\" target=\"_blank\">错误码</a>。</p></li></ul><h3>获取版本信息</h3><ul><li><p><strong>说明</strong></p><p>获取当前的SDK版本信息。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">String</span> libVersion()</code>\n</pre><ul><li><p><strong>参数</strong></p><p>无。</p></li><li><p><strong>返回</strong></p><p>版本信息。</p></li></ul><h3>设置在线授权</h3><ul><li><p><strong>说明</strong></p><p>设置在线授权时需要用到的apiKey和secretKey，关系到在线合成是否可用。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> setApiKey(<span class=\"hljs-keyword\">String</span> apiKey, <span class=\"hljs-keyword\">String</span> secretKey)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">apiKey</td><td style=\"text-align:left\">开放平台注册app的apiKey</td></tr><tr><td style=\"text-align:left\">secretKey</td><td style=\"text-align:left\">开放平台注册app的secretKey</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p><a href=\"#%E9%94%99%E8%AF%AF%E7%A0%81%E8%AF%B4%E6%98%8E\" target=\"_blank\">错误码</a>。</p></li></ul><h3>设置离线授权</h3><ul><li><p><strong>说明</strong></p><p>设置离线授权所需要的AppId，关系到离线合成是否可用。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> setAppId(<span class=\"hljs-keyword\">String</span> appId)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">appId</td><td style=\"text-align:left\">开放平台注册app的appId</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p><a href=\"#%E9%94%99%E8%AF%AF%E7%A0%81%E8%AF%B4%E6%98%8E\" target=\"_blank\">错误码</a>。</p></li></ul><h3>设置参数</h3><ul><li><p><strong>说明</strong></p><p>设置TTS参数。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">int</span> setParam(<span class=\"hljs-keyword\">String</span> <span class=\"hljs-built_in\">key</span>, <span class=\"hljs-keyword\">String</span> value)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">key</td><td style=\"text-align:left\">参数的键</td></tr><tr><td style=\"text-align:left\">value</td><td style=\"text-align:left\">参数的值</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>错误码。</p></li></ul><h3>设置播放器的音频流类型</h3><ul><li><p><strong>说明</strong></p><p>设置播放器的音频流类型。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">setAudioStreamType</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> streamType)</span></span></code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">streamType</td><td style=\"text-align:left\">音频流类型</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>错误码。</p></li></ul><h3>暂停任务</h3><ul><li><p><strong>说明</strong></p><p>暂停当前的TTS任务。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">int</span> <span class=\"hljs-keyword\">pause</span>()</code>\n</pre><ul><li><p><strong>参数</strong></p><p>无</p></li><li><p><strong>返回</strong></p><p>错误码。</p></li></ul><h3>恢复任务</h3><ul><li><p><strong>说明</strong></p><p>恢复暂停的TTS任务。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">int</span> <span class=\"hljs-keyword\">resume</span>()</code>\n</pre><ul><li><p><strong>参数</strong></p><p>无</p></li><li><p><strong>返回</strong></p><p>错误码。</p></li></ul><h3>停止任务</h3><ul><li><p><strong>说明</strong></p><p>停止所有的TTS任务。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-built_in\">stop</span>()</code>\n</pre><ul><li><p><strong>参数</strong></p><p>无</p></li><li><p><strong>返回</strong></p><p>错误码。</p></li></ul><h3>释放TTS资源</h3><ul><li><p><strong>说明</strong></p><p>释放TTS的资源。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-built_in\">release</span>()</code>\n</pre><ul><li><p><strong>参数</strong></p><p>无</p></li><li><p><strong>返回</strong></p><p>错误码。</p></li></ul><h3>加载离线自定义模型文件</h3><ul><li><p><strong>说明</strong></p><p>加载离线自定义模型文件，仅离线引擎可用。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> loadCustomResource(<span class=\"hljs-keyword\">String</span> customModelPath)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">customModelPath</td><td style=\"text-align:left\">自定义模型文件路径</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>错误码。</p></li></ul><h3>释放离线自定义模型文件</h3><ul><li><p><strong>说明</strong></p><p>释放离线自定义模型文件，仅离线引擎可用。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">freeCustomResource</span><span class=\"hljs-params\">()</span></span></code>\n</pre><ul><li><p><strong>参数</strong></p><p>无。</p></li><li><p><strong>返回</strong></p><p>错误码。</p></li></ul><h3>切换离线发音人接口</h3><ul><li><p><strong>说明</strong></p><p>该接口用来切换离线的发音人（发音人模型文件）。传入对应的要切换的资源文件的绝对路径即可，如果speechModelPath不同，则传入对应的路径；如果textModePath不同，则传入对应的路径，如果相同，则传null即可。该方法必须在initTTS成功后才可调用。如果在调用initTTS之后，离线引擎没有被初始化，该接口会重新初始化离线引擎，并加载模型文件。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> loadModel(<span class=\"hljs-keyword\">String</span> speechModelPath, <span class=\"hljs-keyword\">String</span> textModelPath)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">speechModelPath</td><td style=\"text-align:left\">后端模型文件路径</td></tr><tr><td style=\"text-align:left\">textModelPath</td><td style=\"text-align:left\">前端模型文件路径</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>错误码。</p></li></ul><h3>加载英文模型文件</h3><ul><li><p><strong>说明</strong></p><p>加载英文模型文件，仅离线引擎可用。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> loadEnglishModel(<span class=\"hljs-keyword\">String</span> englishTextModelPath, <span class=\"hljs-keyword\">String</span> englishSpeechModelPath)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">englishTextModelPath</td><td style=\"text-align:left\">英文前端模型文件路径</td></tr><tr><td style=\"text-align:left\">englishSpeechModelPath</td><td style=\"text-align:left\">英文后端模型文件路径</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>错误码。</p></li></ul><h3>合成并播放文本</h3><ul><li><p><strong>说明</strong></p><p>合成并播放给定文本，合成并播放功能有多个重载函数，其参数不同，但是返回值相同。</p></li><li><p><strong>返回</strong></p><p>错误码。</p></li><li><p><strong>方法1：合成并播放文本</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> speak(<span class=\"hljs-keyword\">String</span> <span class=\"hljs-built_in\">text</span>)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">text</td><td style=\"text-align:left\">要合成的文本（需要合成的文本text的长度不能超过1024个GBK字节）</td></tr></tbody></table><ul><li><strong>方法2：可排队的合成并播放</strong></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">speak</span><span class=\"hljs-params\">(SpeechSynthesizeBag speechSynthesizeBag)</span></span></code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">speechSynthesizeBag</td><td style=\"text-align:left\">语音合成包</td></tr></tbody></table><ul><li><strong>方法3：可排队的合成并播放</strong></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> speak(<span class=\"hljs-keyword\">String</span> <span class=\"hljs-built_in\">text</span>, <span class=\"hljs-keyword\">String</span> utteranceId)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">text</td><td style=\"text-align:left\">要合成的文本（需要合成的文本text的长度不能超过1024个GBK字节）</td></tr><tr><td style=\"text-align:left\">utteranceId</td><td style=\"text-align:left\">合成文本的ID</td></tr></tbody></table><ul><li><p><strong>方法4：可排队的合成并播放，尚未使用</strong></p><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> speak(<span class=\"hljs-keyword\">String</span> <span class=\"hljs-built_in\">text</span>, <span class=\"hljs-keyword\">String</span> utteranceId, Bundle params)</code>\n</pre></li><li><p><strong>参数</strong></p></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">text</td><td style=\"text-align:left\">要合成的文本（需要合成的文本text的长度不能超过1024个GBK字节）</td></tr><tr><td style=\"text-align:left\">utteranceId</td><td style=\"text-align:left\">合成文本的ID</td></tr><tr><td style=\"text-align:left\">params</td><td style=\"text-align:left\">预留参数</td></tr></tbody></table><h3>合成文本</h3><ul><li><p><strong>说明</strong></p><p>合成给定文本，合成文本功能有多个重载函数，其参数不同，但是返回值相同。</p></li><li><p><strong>返回</strong></p><p>错误码。</p></li><li><p><strong>方法1：合成文本</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> synthesize(<span class=\"hljs-keyword\">String</span> <span class=\"hljs-built_in\">text</span>)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">text</td><td style=\"text-align:left\">要合成的文本（需要合成的文本text的长度不能超过1024个GBK字节）</td></tr></tbody></table><ul><li><strong>方法2：可排队的合成</strong></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">synthesize</span> <span class=\"hljs-params\">(SpeechSynthesizeBag speechSynthesizeBag)</span></span></code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">speechSynthesizeBag</td><td style=\"text-align:left\">语音合成包</td></tr></tbody></table><ul><li><strong>方法3：可排队的合成</strong></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> synthesize(<span class=\"hljs-keyword\">String</span> <span class=\"hljs-built_in\">text</span>, <span class=\"hljs-keyword\">String</span> utteranceId)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">text</td><td style=\"text-align:left\">要合成的文本（需要合成的文本text的长度不能超过1024个GBK字节）</td></tr><tr><td style=\"text-align:left\">utteranceId</td><td style=\"text-align:left\">合成文本的ID</td></tr></tbody></table><ul><li><strong>方法4：可排队的合成，尚未使用</strong></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> synthesize(<span class=\"hljs-keyword\">String</span> <span class=\"hljs-built_in\">text</span>, <span class=\"hljs-keyword\">String</span> utteranceId, Bundle params)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">text</td><td style=\"text-align:left\">要合成的文本（注：需要合成的文本text的长度不能超过1024个GBK字节）</td></tr><tr><td style=\"text-align:left\">utteranceId</td><td style=\"text-align:left\">合成文本的ID</td></tr><tr><td style=\"text-align:left\">params</td><td style=\"text-align:left\">预留参数</td></tr></tbody></table><h3>批量合成并播放</h3><ul><li><p><strong>说明</strong></p><p>批量合成并播放文本文件，一次可传入一个list，这个list会按顺序合成播放。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> batchSpeak(<span class=\"hljs-keyword\">List</span>&lt;SpeechSynthesizeBag&gt; speechSynthesizeBags)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">speechSynthesizeBags</td><td style=\"text-align:left\">语音合成包队列</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>错误码。</p></li></ul><h3>授权验证</h3><ul><li><p><strong>说明</strong></p><p>授权验证接口。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">auth</span><span class=\"hljs-params\">(TtsMode ttsMode)</span></span></code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">ttsMode</td><td style=\"text-align:left\">语音合成模式</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>错误码。</p></li></ul><h2 id=\"bb07ac45\">合成状态监听器</h2><p>SpeechSynthesizerListener是合成状态监听器接口，开发者可以通过实现此接口对识别状态做监听。</p><h3>合成开始</h3><ul><li><p><strong>说明</strong></p><p>合成开始时的回调方法。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">void</span> onSynthesizeStart(<span class=\"hljs-keyword\">String</span> utteranceId)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">utteranceId</td><td style=\"text-align:left\">该次表达的标识</td></tr></tbody></table><ul><li><strong>返回</strong> 无。</li></ul><h3>获取合成数据</h3><ul><li><p><strong>说明</strong></p><p>当获取合成数据时调用的方法，合成数据会分多次返回，需自行保存。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">void</span> onSynthesizeDataArrived(<span class=\"hljs-keyword\">String</span> utteranceId, <span class=\"hljs-keyword\">byte</span>[] audioData, <span class=\"hljs-keyword\">int</span> progress)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">utteranceId</td><td style=\"text-align:left\">该次表达的标识</td></tr><tr><td style=\"text-align:left\">audioData</td><td style=\"text-align:left\">返回的合成数据</td></tr><tr><td style=\"text-align:left\">progress</td><td style=\"text-align:left\">播放文字的进度</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>无。</p></li></ul><h3>合成完成状态</h3><ul><li><p><strong>说明</strong></p><p>当合成完成时调用的方法。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">void</span> onSynthesizeFinish(<span class=\"hljs-keyword\">String</span> utteranceId)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">utteranceId</td><td style=\"text-align:left\">该次表达的标识</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>无。</p></li></ul><h3>播放开始状态</h3><ul><li><p><strong>说明</strong></p><p>当开始播放时调用的方法。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">void</span> onSpeechStart(<span class=\"hljs-keyword\">String</span> utteranceId)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">utteranceId</td><td style=\"text-align:left\">该次表达的标识</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>无。</p></li></ul><h3>播放进度状态</h3><ul><li><p><strong>说明</strong></p><p>当进度进度改变时调用的方法。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">void</span> onSpeechProgressChanged(<span class=\"hljs-keyword\">String</span> utteranceId, <span class=\"hljs-keyword\">int</span> progress)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">utteranceId</td><td style=\"text-align:left\">该次表达的标识</td></tr><tr><td style=\"text-align:left\">progress</td><td style=\"text-align:left\">播放文字的进度</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>无。</p></li></ul><h3>播放完成</h3><ul><li><p><strong>说明</strong></p><p>播放完成时调用的方法。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">void</span> onSpeechFinish(<span class=\"hljs-keyword\">String</span> utteranceId)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">utteranceId</td><td style=\"text-align:left\">该次表达的标识</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>无。</p></li></ul><h3>出错</h3><ul><li><p><strong>说明</strong></p><p>出错时的回调函数。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-attribute\">void</span> <span class=\"hljs-literal\">on</span>Error(String utteranceId, SpeechError <span class=\"hljs-literal\">error</span>)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">utteranceId</td><td style=\"text-align:left\">该次表达的标识</td></tr><tr><td style=\"text-align:left\">error</td><td style=\"text-align:left\">错误码</td></tr></tbody></table><ul><li><strong>返回</strong> 无。</li></ul><h1 id=\"00dc0b18\">参数和错误码说明</h1><h2 id=\"d6c7be5b\">合成器参数设置说明</h2><p>在调用speak方法开始合成并朗读之前，可以对参数进行配置（未设置的参数将使用默认值），目前支持的类型如下：</p><table><thead><tr><th style=\"text-align:left\">参数名</th><th style=\"text-align:left\">默认值</th><th style=\"text-align:left\">备注</th></tr></thead><tbody><tr><td style=\"text-align:left\">PARAM_VOLUME</td><td style=\"text-align:left\">&quot;5&quot;</td><td style=\"text-align:left\">中级音量，范围[0-9]</td></tr><tr><td style=\"text-align:left\">PARAM_SPEED</td><td style=\"text-align:left\">&quot;5&quot;</td><td style=\"text-align:left\">中速，范围[0-9]</td></tr><tr><td style=\"text-align:left\">PARAM_PITCH</td><td style=\"text-align:left\">&quot;5&quot;</td><td style=\"text-align:left\">中调，范围[0-9]</td></tr><tr><td style=\"text-align:left\">PARAM_SPEAKER</td><td style=\"text-align:left\">&quot;0&quot;</td><td style=\"text-align:left\">0 (普通女声)</td></tr><tr><td style=\"text-align:left\"></td><td style=\"text-align:left\"></td><td style=\"text-align:left\">1 (普通男声)</td></tr><tr><td style=\"text-align:left\"></td><td style=\"text-align:left\"></td><td style=\"text-align:left\">2 (特别男声)</td></tr><tr><td style=\"text-align:left\"></td><td style=\"text-align:left\"></td><td style=\"text-align:left\">3 (情感男声&lt;度逍遥&gt;)</td></tr><tr><td style=\"text-align:left\"></td><td style=\"text-align:left\"></td><td style=\"text-align:left\">4 (情感儿童声&lt;度丫丫&gt;)</td></tr><tr><td style=\"text-align:left\">PARAM_MIX_MODE</td><td style=\"text-align:left\">MIX_MODE_DEFAULT</td><td style=\"text-align:left\">MIX_MODE_DEFAULT(mix模式下，wifi使用在线合成，非wifi使用离线合成)</td></tr><tr><td style=\"text-align:left\"></td><td style=\"text-align:left\"></td><td style=\"text-align:left\">MIX_MODE_HIGH_SPEED_NETWORK(mix模式下，wifi,4G,3G使用在线合成，其他使用离线合成)</td></tr><tr><td style=\"text-align:left\"></td><td style=\"text-align:left\"></td><td style=\"text-align:left\">MIX_MODE_HIGH_SPEED_SYNTHESIZE(mix模式下，在线返回速度如果慢（超时，一般为1.2秒）直接切换离线，适用于网络环境较差的情况)</td></tr><tr><td style=\"text-align:left\"></td><td style=\"text-align:left\"></td><td style=\"text-align:left\">MIX_MODE_HIGH_SPEED_SYNTHESIZE_WIFI(mix模式下，仅wifi使用在线合成,返回速度如果慢（超时，一般为1.2秒）直接切换离线，适用于仅WIFI网络环境较差的情况)</td></tr><tr><td style=\"text-align:left\">PARAM_AUDIO_ENCODE</td><td style=\"text-align:left\">AUDIO_ENCODE_AMR</td><td style=\"text-align:left\">AUDIO_ENCODE_BV</td></tr><tr><td style=\"text-align:left\"></td><td style=\"text-align:left\"></td><td style=\"text-align:left\">AUDIO_ENCODE_AMR</td></tr><tr><td style=\"text-align:left\"></td><td style=\"text-align:left\"></td><td style=\"text-align:left\">AUDIO_ENCODE_OPUS</td></tr><tr><td style=\"text-align:left\">PARAM_AUDIO_RATE</td><td style=\"text-align:left\">AUDIO_BITRATE_AMR_15K85</td><td style=\"text-align:left\">AUDIO_BITRATE_BV_16K</td></tr><tr><td style=\"text-align:left\"></td><td style=\"text-align:left\"></td><td style=\"text-align:left\">AUDIO_BITRATE_AMR_6K6</td></tr><tr><td style=\"text-align:left\"></td><td style=\"text-align:left\"></td><td style=\"text-align:left\">AUDIO_BITRATE_AMR_8K85</td></tr><tr><td style=\"text-align:left\"></td><td style=\"text-align:left\"></td><td style=\"text-align:left\">AUDIO_BITRATE_AMR_12K65</td></tr><tr><td style=\"text-align:left\"></td><td style=\"text-align:left\"></td><td style=\"text-align:left\">AUDIO_BITRATE_AMR_14K25</td></tr><tr><td style=\"text-align:left\"></td><td style=\"text-align:left\"></td><td style=\"text-align:left\">AUDIO_BITRATE_AMR_15K85</td></tr><tr><td style=\"text-align:left\"></td><td style=\"text-align:left\"></td><td style=\"text-align:left\">AUDIO_BITRATE_AMR_18K25</td></tr><tr><td style=\"text-align:left\"></td><td style=\"text-align:left\"></td><td style=\"text-align:left\">AUDIO_BITRATE_AMR_19K85</td></tr><tr><td style=\"text-align:left\"></td><td style=\"text-align:left\"></td><td style=\"text-align:left\">AUDIO_BITRATE_AMR_23K05</td></tr><tr><td style=\"text-align:left\"></td><td style=\"text-align:left\"></td><td style=\"text-align:left\">AUDIO_BITRATE_AMR_23K85</td></tr><tr><td style=\"text-align:left\"></td><td style=\"text-align:left\"></td><td style=\"text-align:left\">AUDIO_BITRATE_OPUS_8K</td></tr><tr><td style=\"text-align:left\"></td><td style=\"text-align:left\"></td><td style=\"text-align:left\">AUDIO_BITRATE_OPUS_16K</td></tr><tr><td style=\"text-align:left\"></td><td style=\"text-align:left\"></td><td style=\"text-align:left\">AUDIO_BITRATE_OPUS_18K</td></tr><tr><td style=\"text-align:left\"></td><td style=\"text-align:left\"></td><td style=\"text-align:left\">AUDIO_BITRATE_OPUS_20K</td></tr><tr><td style=\"text-align:left\"></td><td style=\"text-align:left\"></td><td style=\"text-align:left\">AUDIO_BITRATE_OPUS_24K</td></tr><tr><td style=\"text-align:left\"></td><td style=\"text-align:left\"></td><td style=\"text-align:left\">AUDIO_BITRATE_OPUS_32K</td></tr><tr><td style=\"text-align:left\">PARAM_VOCODER_OPTIM_LEVEL</td><td style=\"text-align:left\">0</td><td style=\"text-align:left\">合成引擎速度优化等级，取值范围[0, 2]，值越大速度越快（离线引擎）</td></tr></tbody></table><h2 id=\"6191f603\">错误码说明</h2><table><thead><tr><th style=\"text-align:left\">错误码值</th><th style=\"text-align:left\">错误码描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">-1</td><td style=\"text-align:left\">在线引擎授权失败</td></tr><tr><td style=\"text-align:left\">-2</td><td style=\"text-align:left\">在线合成请求失败</td></tr><tr><td style=\"text-align:left\">-3</td><td style=\"text-align:left\">在线合成停止失败</td></tr><tr><td style=\"text-align:left\">-4</td><td style=\"text-align:left\">在线授权中断异常</td></tr><tr><td style=\"text-align:left\">-5</td><td style=\"text-align:left\">在线授权执行时异常</td></tr><tr><td style=\"text-align:left\">-6</td><td style=\"text-align:left\">在线授权时间超时</td></tr><tr><td style=\"text-align:left\">-7</td><td style=\"text-align:left\">在线合成返回错误信息</td></tr><tr><td style=\"text-align:left\">-8</td><td style=\"text-align:left\">在线授权token为空</td></tr><tr><td style=\"text-align:left\">-9</td><td style=\"text-align:left\">在线引擎没有初始化</td></tr><tr><td style=\"text-align:left\">-10</td><td style=\"text-align:left\">在线引擎合成时异常</td></tr><tr><td style=\"text-align:left\">-100</td><td style=\"text-align:left\">离线引擎授权失败</td></tr><tr><td style=\"text-align:left\">-101</td><td style=\"text-align:left\">离线合成停止失败</td></tr><tr><td style=\"text-align:left\">-102</td><td style=\"text-align:left\">离线授权下载License失败</td></tr><tr><td style=\"text-align:left\">-103</td><td style=\"text-align:left\">离线授权信息为空</td></tr><tr><td style=\"text-align:left\">-104</td><td style=\"text-align:left\">离线授权类型未知</td></tr><tr><td style=\"text-align:left\">-105</td><td style=\"text-align:left\">离线授权中断异常</td></tr><tr><td style=\"text-align:left\">-106</td><td style=\"text-align:left\">离线授权执行时异常</td></tr><tr><td style=\"text-align:left\">-107</td><td style=\"text-align:left\">离线授权执行时间超时</td></tr><tr><td style=\"text-align:left\">-108</td><td style=\"text-align:left\">离线合成引擎初始化失败</td></tr><tr><td style=\"text-align:left\">-109</td><td style=\"text-align:left\">离线引擎未初始化</td></tr><tr><td style=\"text-align:left\">-110</td><td style=\"text-align:left\">离线合成时异常</td></tr><tr><td style=\"text-align:left\">-111</td><td style=\"text-align:left\">离线合成返回值非0</td></tr><tr><td style=\"text-align:left\">-112</td><td style=\"text-align:left\">离线授权已过期</td></tr><tr><td style=\"text-align:left\">-113</td><td style=\"text-align:left\">离线授权包名不匹配</td></tr><tr><td style=\"text-align:left\">-114</td><td style=\"text-align:left\">离线授权签名不匹配</td></tr><tr><td style=\"text-align:left\">-115</td><td style=\"text-align:left\">离线授权设备信息不匹配</td></tr><tr><td style=\"text-align:left\">-116</td><td style=\"text-align:left\">离线授权平台不匹配</td></tr><tr><td style=\"text-align:left\">-117</td><td style=\"text-align:left\">离线授权的license文件不存在</td></tr><tr><td style=\"text-align:left\">-200</td><td style=\"text-align:left\">混合引擎离线在线都授权失败</td></tr><tr><td style=\"text-align:left\">-201</td><td style=\"text-align:left\">混合引擎授权中断异常</td></tr><tr><td style=\"text-align:left\">-202</td><td style=\"text-align:left\">混合引擎授权执行时异常</td></tr><tr><td style=\"text-align:left\">-203</td><td style=\"text-align:left\">混合引擎授权执行时间超时</td></tr><tr><td style=\"text-align:left\">-300</td><td style=\"text-align:left\">合成文本为空</td></tr><tr><td style=\"text-align:left\">-301</td><td style=\"text-align:left\">合成文本长度过长（不要超过GBK1024个字节）</td></tr><tr><td style=\"text-align:left\">-302</td><td style=\"text-align:left\">合成文本无法获取GBK字节</td></tr><tr><td style=\"text-align:left\">-400</td><td style=\"text-align:left\">TTS未初始化</td></tr><tr><td style=\"text-align:left\">-401</td><td style=\"text-align:left\">TTS模式无效</td></tr><tr><td style=\"text-align:left\">-402</td><td style=\"text-align:left\">TTS合成队列已满（最大限度为1000）</td></tr><tr><td style=\"text-align:left\">-403</td><td style=\"text-align:left\">TTS批量合成文本过多（最多为100）</td></tr><tr><td style=\"text-align:left\">-404</td><td style=\"text-align:left\">TTS停止失败</td></tr><tr><td style=\"text-align:left\">-405</td><td style=\"text-align:left\">TTS APP ID无效</td></tr><tr><td style=\"text-align:left\">-406</td><td style=\"text-align:left\">TTS被调用方法参数无效</td></tr><tr><td style=\"text-align:left\">-500</td><td style=\"text-align:left\">Context被释放或为空</td></tr><tr><td style=\"text-align:left\">-600</td><td style=\"text-align:left\">播放器为空</td></tr><tr><td style=\"text-align:left\">-9999</td><td style=\"text-align:left\">未知错误</td></tr></tbody></table><h1 id=\"ad6a6bd7\">完整示例</h1><p>一个简单的语音合成示例如下所示，请替换相关参数和操作：</p><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">DemoActivity</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Activity</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title\">SpeechSynthesizerListener</span> </span>{\n    <span class=\"hljs-comment\">// 语音合成客户端</span>\n    <span class=\"hljs-keyword\">private</span> SpeechSynthesizer mSpeechSynthesizer;\n\n    <span class=\"hljs-comment\">// Activity的onCreate函数</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">onCreate</span><span class=\"hljs-params\">(Bundle savedInstanceState)</span> </span>{\n        <span class=\"hljs-keyword\">super</span>.onCreate(savedInstanceState);\n        startTTS();\n    }\n\n    <span class=\"hljs-comment\">// 初始化语音合成客户端并启动</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">startTTS</span><span class=\"hljs-params\">()</span> </span>{\n        <span class=\"hljs-comment\">// 获取语音合成对象实例</span>\n        mSpeechSynthesizer = SpeechSynthesizer.getInstance();\n        <span class=\"hljs-comment\">// 设置context</span>\n        mSpeechSynthesizer.setContext(<span class=\"hljs-keyword\">this</span>);\n        <span class=\"hljs-comment\">// 设置语音合成状态监听器</span>\n        mSpeechSynthesizer.setSpeechSynthesizerListener(<span class=\"hljs-keyword\">this</span>);\n        <span class=\"hljs-comment\">// 设置在线语音合成授权，需要填入从百度语音官网申请的api_key和secret_key</span>\n        mSpeechSynthesizer.setApiKey(<span class=\"hljs-string\">\"your_api_key\"</span>, <span class=\"hljs-string\">\"your_secret_key\"</span>);\n        <span class=\"hljs-comment\">// 设置离线语音合成授权，需要填入从百度语音官网申请的app_id</span>\n        mSpeechSynthesizer.setAppId(<span class=\"hljs-string\">\"your_app_id\"</span>);\n        <span class=\"hljs-comment\">// 设置语音合成文本模型文件</span>\n        mSpeechSynthesizer.setParam(SpeechSynthesizer.PARAM_TTS_TEXT_MODEL_FILE, <span class=\"hljs-string\">\"your_txt_file_path\"</span>);\n        <span class=\"hljs-comment\">// 设置语音合成声音模型文件</span>\n        mSpeechSynthesizer.setParam(SpeechSynthesizer.PARAM_TTS_SPEECH_MODEL_FILE, <span class=\"hljs-string\">\"your_speech_file_path\"</span>);\n        <span class=\"hljs-comment\">// 设置语音合成声音授权文件</span>\n        mSpeechSynthesizer.setParam(SpeechSynthesizer.PARAM_TTS_LICENCE_FILE, <span class=\"hljs-string\">\"your_licence_path\"</span>);\n        <span class=\"hljs-comment\">// 获取语音合成授权信息</span>\n        AuthInfo authInfo = mSpeechSynthesizer.auth(TtsMode.MIX);\n        <span class=\"hljs-comment\">// 判断授权信息是否正确，如果正确则初始化语音合成器并开始语音合成，如果失败则做错误处理</span>\n        <span class=\"hljs-keyword\">if</span> (authInfo.isSuccess()) {\n            mSpeechSynthesizer.initTts(TtsMode.MIX);\n            mSpeechSynthesizer.speak(<span class=\"hljs-string\">\"百度语音合成示例程序正在运行\"</span>);\n        } <span class=\"hljs-keyword\">else</span> {\n            <span class=\"hljs-comment\">// 授权失败</span>\n        }\n\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">onError</span><span class=\"hljs-params\">(String arg0, SpeechError arg1)</span> </span>{\n        <span class=\"hljs-comment\">// 监听到出错，在此添加相关操作</span>\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">onSpeechFinish</span><span class=\"hljs-params\">(String arg0)</span> </span>{\n        <span class=\"hljs-comment\">// 监听到播放结束，在此添加相关操作</span>\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">onSpeechProgressChanged</span><span class=\"hljs-params\">(String arg0, <span class=\"hljs-keyword\">int</span> arg1)</span> </span>{\n        <span class=\"hljs-comment\">// 监听到播放进度有变化，在此添加相关操作</span>\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">onSpeechStart</span><span class=\"hljs-params\">(String arg0)</span> </span>{\n        <span class=\"hljs-comment\">// 监听到合成并播放开始，在此添加相关操作</span>\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">onSynthesizeDataArrived</span><span class=\"hljs-params\">(String arg0, <span class=\"hljs-keyword\">byte</span>[] arg1, <span class=\"hljs-keyword\">int</span> arg2)</span> </span>{\n        <span class=\"hljs-comment\">// 监听到有合成数据到达，在此添加相关操作</span>\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">onSynthesizeFinish</span><span class=\"hljs-params\">(String arg0)</span> </span>{\n        <span class=\"hljs-comment\">// 监听到合成结束，在此添加相关操作</span>\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">onSynthesizeStart</span><span class=\"hljs-params\">(String arg0)</span> </span>{\n        <span class=\"hljs-comment\">// 监听到合成开始，在此添加相关操作</span>\n    }\n}</code>\n</pre>",
  "headings": [
    {
      "level": 1,
      "text": "简介",
      "id": "cd06e5ea"
    },
    {
      "level": 2,
      "text": "概念解释",
      "id": "43deb8d8"
    },
    {
      "level": 2,
      "text": "功能介绍",
      "id": "9d041643"
    },
    {
      "level": 2,
      "text": "兼容性",
      "id": "a6756766"
    },
    {
      "level": 2,
      "text": "开发包说明",
      "id": "f2f68da5"
    },
    {
      "level": 1,
      "text": "集成指南",
      "id": "f58c080b"
    },
    {
      "level": 2,
      "text": "创建应用",
      "id": "d565cc41"
    },
    {
      "level": 2,
      "text": "添加BDTTSClient到工程",
      "id": "097fe341"
    },
    {
      "level": 2,
      "text": "添加语音合成资源文件",
      "id": "361b4a28"
    },
    {
      "level": 2,
      "text": "添加权限",
      "id": "4c92fca9"
    },
    {
      "level": 2,
      "text": "Proguard配置",
      "id": "96017a06"
    },
    {
      "level": 1,
      "text": "重要接口说明",
      "id": "67e746d3"
    },
    {
      "level": 2,
      "text": "合成器",
      "id": "4ec5a173"
    },
    {
      "level": 2,
      "text": "合成状态监听器",
      "id": "bb07ac45"
    },
    {
      "level": 1,
      "text": "参数和错误码说明",
      "id": "00dc0b18"
    },
    {
      "level": 2,
      "text": "合成器参数设置说明",
      "id": "d6c7be5b"
    },
    {
      "level": 2,
      "text": "错误码说明",
      "id": "6191f603"
    },
    {
      "level": 1,
      "text": "完整示例",
      "id": "ad6a6bd7"
    }
  ]
}
