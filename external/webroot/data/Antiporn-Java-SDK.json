{
  "html": "<h1 id=\"5871b905\">Java SDK文档</h1><p>本文档主要介绍黄反识别服务。在使用本文档前，您需要先了解黄反识别服务。</p><h1 id=\"ef3cf8c9\">安装黄反识别服务 Java SDK</h1><p><strong>Java SDK目录结构</strong></p><pre>\n<code class=\"hljs\" lang=\"\">com<span class=\"hljs-selector-class\">.baidu</span><span class=\"hljs-selector-class\">.aip</span>\n       ├── auth                                <span class=\"hljs-comment\">//签名相关类</span>\n       ├── http                                <span class=\"hljs-comment\">//Http通信相关类</span>\n       ├── client                              <span class=\"hljs-comment\">//公用类</span>\n       ├── exception                           <span class=\"hljs-comment\">//exception类</span>\n       ├── antiporn\n       │       └── AipAntiporn                 <span class=\"hljs-comment\">//AipAntiporn类</span>\n       └── util                                <span class=\"hljs-comment\">//工具类</span></code>\n</pre><p><strong>支持 JAVA版本：1.7+</strong></p><p><strong>直接使用JAR包步骤如下：</strong></p><p>1.在<a href=\"http://ai.baidu.com/sdk\" target=\"_blank\">官方网站</a>下载Java SDK压缩工具包。</p><p>2.将下载的<code>aip-antiporn-java-sdk-<span class=\"hljs-keyword\">version</span>.<span class=\"hljs-keyword\">zip</span></code>解压后，复制到工程文件夹中。</p><p>3.在Eclipse右键“工程 -&gt; Properties -&gt; Java Build Path -z&gt; Add JARs”。</p><p>4.添加SDK工具包<code>antiporn_sdk-<span class=\"hljs-built_in\">version</span>.jar</code>和第三方依赖工具包<code><span class=\"hljs-selector-tag\">json-20160810</span><span class=\"hljs-selector-class\">.jar</span></code>。</p><p>其中，<code><span class=\"hljs-built_in\">version</span></code>为版本号，添加完成后，用户就可以在工程中使用Antiporn Java SDK。</p><h1 id=\"ad6c2f3f\">快速入门</h1><p>黄反识别服务，依托百度业界领先的图像识别算法，基于大数据深度学习技术，提供图片色情、性感、正常三个类别的识别服务。</p><h2 id=\"79d32dde\">新建AipAntipornClient</h2><p>用户可以参考如下代码新建一AipAntipornClient：</p><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> class Sample {\n    <span class=\"hljs-comment\">//设置APPID/AK/SK</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-keyword\">String</span> APP_ID = <span class=\"hljs-string\">\"你的 App ID\"</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-keyword\">String</span> API_KEY = <span class=\"hljs-string\">\"你的 Api ID\"</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-keyword\">String</span> SECRET_KEY = <span class=\"hljs-string\">\"你的 Secret Key\"</span>;\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> main(<span class=\"hljs-keyword\">String</span>[] args) {\n\n        <span class=\"hljs-comment\">// 初始化一个AntipornClient</span>\n        AipAntiporn client = <span class=\"hljs-keyword\">new</span> AipAntiporn(APP_ID, API_KEY, SECRET_KEY);\n\n        <span class=\"hljs-comment\">// 可选：设置网络连接参数</span>\n        client.setConnectionTimeoutInMillis(<span class=\"hljs-number\">2000</span>);\n        client.setSocketTimeoutInMillis(<span class=\"hljs-number\">60000</span>);\n\n        <span class=\"hljs-comment\">// 调用接口</span>\n        <span class=\"hljs-keyword\">String</span> path = <span class=\"hljs-string\">\"test.jpg\"</span>;\n        <span class=\"hljs-keyword\">JSONObject</span> res = client.detect(path);\n        System.out.<span class=\"hljs-built_in\">println</span>(res);\n    }\n}</code>\n</pre><p>在上面代码中，常量<code>APP_ID</code>在百度云控制台中创建，常量<code>API_KEY</code>与<code>SECRET_KEY</code>是在创建完毕应用后，系统分配给用户的，均为字符串，用于标识用户，为访问做签名验证，可在AI服务控制台中的<strong>应用列表</strong>中查看。</p><p><strong>注意：</strong>如您以前是百度云的老用户，其中<code>API_KEY</code>对应百度云的“Access Key ID”，<code>SECRET_KEY</code>对应百度云的“Access Key Secret”。</p><h2 id=\"dcc20f0f\">配置AipAntipornClient</h2><p>如果用户需要配置AipAntipornClient的一些细节参数，可以在构造AipAntiporn之后调用接口设置参数，目前只支持以下参数：</p><table><thead><tr><th>接口</th><th>说明</th></tr></thead><tbody><tr><td>setConnectionTimeoutInMillis</td><td>建立连接的超时时间（单位：毫秒）</td></tr><tr><td>setSocketTimeoutInMillis</td><td>通过打开的连接传输数据的超时时间（单位：毫秒）</td></tr></tbody></table><h1 id=\"bb496112\">错误信息格式</h1><p>若请求错误，服务器将返回的JSON文本包含以下参数：</p><ul><li><strong>error_code：</strong>错误码；关于错误码的详细信息请参考<strong>通用错误码</strong>和<strong>业务相关错误码</strong>。</li><li><strong>error_msg：</strong>错误描述信息，帮助理解和解决发生的错误。</li></ul><p><strong>SDK本地检测参数返回的错误码</strong>：</p><table><thead><tr><th>error_code</th><th>error_msg</th><th>备注</th></tr></thead><tbody><tr><td>SDK100</td><td>image size error</td><td>图片大小超限</td></tr><tr><td>SDK101</td><td>image length error</td><td>图片边长不符合要求</td></tr><tr><td>SDK102</td><td>read image file error</td><td>读取图片文件错误</td></tr><tr><td>SDK108</td><td>connection or read data time out</td><td>连接超时或读取数据超时</td></tr><tr><td>SDK109</td><td>unsupported image format</td><td>不支持的图片格式</td></tr></tbody></table><p><strong>服务端返回的错误码</strong></p><table><thead><tr><th>错误码</th><th>错误信息</th><th>描述</th></tr></thead><tbody><tr><td>216015</td><td>module closed</td><td>模块关闭</td></tr><tr><td>216100</td><td>invalid param</td><td>非法参数</td></tr><tr><td>216101</td><td>not enough param</td><td>参数数量不够</td></tr><tr><td>216102</td><td>service not support</td><td>业务不支持</td></tr><tr><td>216103</td><td>param too long</td><td>参数太长</td></tr><tr><td>216110</td><td>appid not exist</td><td>APP ID不存在</td></tr><tr><td>216111</td><td>invalid userid</td><td>非法用户ID</td></tr><tr><td>216200</td><td>empty image</td><td>空的图片</td></tr><tr><td>216201</td><td>image format error</td><td>图片格式错误</td></tr><tr><td>216202</td><td>image size error</td><td>图片大小错误</td></tr><tr><td>216300</td><td>db error</td><td>DB错误</td></tr><tr><td>216400</td><td>backend error</td><td>后端系统错误</td></tr><tr><td>216401</td><td>internal error</td><td>内部错误</td></tr><tr><td>216402</td><td>face not found</td><td>没有找到人脸</td></tr><tr><td>216500</td><td>unknown error</td><td>未知错误</td></tr><tr><td>282000</td><td>logic internal error</td><td>业务逻辑层内部错误</td></tr><tr><td>282001</td><td>logic backend error</td><td>业务逻辑层后端服务错误</td></tr><tr><td>282002</td><td>input encoding error</td><td>请求参数编码错误</td></tr><tr><td>282100</td><td>image transcode error</td><td>图片压缩转码错误</td></tr><tr><td>282202</td><td>antiporn detect timeout</td><td>检测超时</td></tr><tr><td>282203</td><td>image frame size error</td><td>gif单帧大小超限</td></tr><tr><td>282204</td><td>image frames limit error</td><td>gif总帧数超限</td></tr><tr><td>282205</td><td>image fromat must gif</td><td>图片格式错误</td></tr></tbody></table><h1 id=\"0e42f851\">黄反识别</h1><p>图片接受类型支持本地图片路径字符串，图片文件二进制数组。</p><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> antiPorn(AipAntiporn client) {\n    <span class=\"hljs-comment\">// 参数为本地图片路径</span>\n    <span class=\"hljs-keyword\">String</span> imagePath = <span class=\"hljs-string\">\"porn.jpg\"</span>;\n    <span class=\"hljs-keyword\">JSONObject</span> response = client.detect(imagePath);\n    System.out.<span class=\"hljs-built_in\">println</span>(response.toString());\n\n    <span class=\"hljs-comment\">// 参数为本地图片文件二进制数组</span>\n    <span class=\"hljs-built_in\">byte</span>[] file = readImageFile(imagePath);\n    <span class=\"hljs-keyword\">JSONObject</span> response = client.detect(file);\n    System.out.<span class=\"hljs-built_in\">println</span>(response.toString());\n}</code>\n</pre><p><strong>黄反识别 请求参数详情</strong></p><table><thead><tr><th style=\"text-align:left\">参数</th><th style=\"text-align:left\">类型</th><th style=\"text-align:left\">描述</th><th style=\"text-align:left\">是否必须</th></tr></thead><tbody><tr><td style=\"text-align:left\">image</td><td style=\"text-align:left\">String</td><td style=\"text-align:left\">图像数据，支持本地图像文件路径，图像文件二进制数组，要求base64编码后大小不超过4M，支持jpg/png/bmp/gif格式（目前gif图片只取第一帧检测）</td><td style=\"text-align:left\">是</td></tr></tbody></table><p><strong>黄反识别 返回数据参数详情</strong></p><table><thead><tr><th style=\"text-align:left\">参数</th><th style=\"text-align:left\">类型</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">log_id</td><td style=\"text-align:left\">uint64</td><td style=\"text-align:left\">请求标识码，随机数，唯一</td></tr><tr><td style=\"text-align:left\">result_num</td><td style=\"text-align:left\">Int</td><td style=\"text-align:left\">返回结果数目，即：result数组中元素个数</td></tr><tr><td style=\"text-align:left\">result</td><td style=\"text-align:left\">Array[Object]</td><td style=\"text-align:left\">结果数组，每项内容对应一个分类维度的结果</td></tr><tr><td style=\"text-align:left\">+class_name</td><td style=\"text-align:left\">String</td><td style=\"text-align:left\">分类结果名称，示例：色情</td></tr><tr><td style=\"text-align:left\">+probability</td><td style=\"text-align:left\">double</td><td style=\"text-align:left\">分类结果置信度，示例：0.89471650123596</td></tr></tbody></table><h1 id=\"d29b2e66\">GIF色情图像识别</h1><p>图片接受类型支持本地图片路径字符串，图片文件二进制数组，此接口只支持gif识别，若非gif接口，请使用<a href=\"#%E9%BB%84%E5%8F%8D%E8%AF%86%E5%88%AB\" target=\"_blank\">黄反识别</a>接口。接口会对图片中每一帧进行识别，并返回所有检测结果中色情值最大的为结果。</p><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> antiPornGif(AipAntiporn client) {\n    <span class=\"hljs-comment\">// 参数为本地图片路径</span>\n    <span class=\"hljs-keyword\">String</span> imagePath = <span class=\"hljs-string\">\"porn.gif\"</span>;\n    <span class=\"hljs-keyword\">JSONObject</span> response = client.detectGif(imagePath);\n    System.out.<span class=\"hljs-built_in\">println</span>(response.toString());\n\n    <span class=\"hljs-comment\">// 参数为本地图片文件二进制数组</span>\n    <span class=\"hljs-built_in\">byte</span>[] file = readImageFile(imagePath);  <span class=\"hljs-comment\">// 此函数仅为示例</span>\n    <span class=\"hljs-keyword\">JSONObject</span> response = client.detectGif(file);\n    System.out.<span class=\"hljs-built_in\">println</span>(response.toString());\n}</code>\n</pre><p><strong>GIF色情图像识别 请求参数详情</strong></p><table><thead><tr><th style=\"text-align:left\">参数</th><th style=\"text-align:left\">类型</th><th style=\"text-align:left\">描述</th><th style=\"text-align:left\">是否必须</th></tr></thead><tbody><tr><td style=\"text-align:left\">image</td><td style=\"text-align:left\">String</td><td style=\"text-align:left\">图像数据，支持本地图像文件路径，图像文件二进制数组</td><td style=\"text-align:left\">是</td></tr></tbody></table><p><strong>GIF色情图像识别 访问限制</strong></p><table><thead><tr><th>检查项</th><th>限制条件</th></tr></thead><tbody><tr><td>图片格式</td><td>gif</td></tr><tr><td>每帧编码后大小</td><td>&lt; 4M</td></tr><tr><td>帧数</td><td>不超过50</td></tr><tr><td>GIF图片整体大小</td><td>base64编码后不超过20M</td></tr></tbody></table><p><strong>GIF色情图像识别 返回数据参数详情</strong></p><table><thead><tr><th style=\"text-align:left\">参数</th><th style=\"text-align:left\">类型</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">log_id</td><td style=\"text-align:left\">uint64</td><td style=\"text-align:left\">请求标识码，随机数，唯一</td></tr><tr><td style=\"text-align:left\">frame_count</td><td style=\"text-align:left\">uint64</td><td style=\"text-align:left\">gif总帧数</td></tr><tr><td style=\"text-align:left\">porn_probability</td><td style=\"text-align:left\">double</td><td style=\"text-align:left\">色情识别置信度</td></tr><tr><td style=\"text-align:left\">result_num</td><td style=\"text-align:left\">Int</td><td style=\"text-align:left\">返回结果数目，即：result数组中元素个数</td></tr><tr><td style=\"text-align:left\">result</td><td style=\"text-align:left\">Array[Object]</td><td style=\"text-align:left\">结果数组，每项内容对应一个分类维度的结果</td></tr><tr><td style=\"text-align:left\">+class_name</td><td style=\"text-align:left\">String</td><td style=\"text-align:left\">分类结果名称，示例：色情</td></tr><tr><td style=\"text-align:left\">+probability</td><td style=\"text-align:left\">double</td><td style=\"text-align:left\">分类结果置信度，示例：0.89471650123596</td></tr></tbody></table><p><strong>返回示例</strong></p><pre>\n<code class=\"hljs\" lang=\"\">{\n    <span class=\"hljs-attr\">\"log_id\"</span>: <span class=\"hljs-number\">1744190292</span>,\n    <span class=\"hljs-attr\">\"frame_count\"</span>: <span class=\"hljs-number\">9</span>,\n    <span class=\"hljs-attr\">\"porn_probability\"</span>:<span class=\"hljs-number\">0.41608</span>\n    <span class=\"hljs-string\">\"result_num\"</span>: <span class=\"hljs-number\">3</span>,\n    <span class=\"hljs-attr\">\"result\"</span>: [\n        {\n            <span class=\"hljs-attr\">\"class_name\"</span>: <span class=\"hljs-string\">\"色情\"</span>,\n            <span class=\"hljs-attr\">\"probability\"</span>: <span class=\"hljs-number\">0.41608</span>\n        },\n        {\n            <span class=\"hljs-attr\">\"class_name\"</span>: <span class=\"hljs-string\">\"性感\"</span>,\n            <span class=\"hljs-attr\">\"probability\"</span>: <span class=\"hljs-number\">0.249851</span>\n        },\n        {\n            <span class=\"hljs-attr\">\"class_name\"</span>: <span class=\"hljs-string\">\"正常\"</span>,\n            <span class=\"hljs-attr\">\"probability\"</span>: <span class=\"hljs-number\">0.334069</span>\n        }\n    ]\n}</code>\n</pre><h1 id=\"18701ee7\">版本更新记录</h1><table><thead><tr><th>上线日期</th><th>版本号</th><th>更新内容</th></tr></thead><tbody><tr><td>2017.4.13</td><td>1.3.2</td><td>AI SDK同步版本更新</td></tr><tr><td>2017.3.23</td><td>1.3</td><td>新增GIF色情图像识别接口，兼容Android环境</td></tr><tr><td>2017.3.2</td><td>1.2</td><td>上线对图片参数要求限制，增加设置超时接口</td></tr><tr><td>2017.1.20</td><td>1.1</td><td>对部分云用户调用不成功的错误修复</td></tr><tr><td>2017.1.6</td><td>1.0</td><td>初始版本，上线黄反接口</td></tr></tbody></table>",
  "headings": [
    {
      "level": 1,
      "text": "Java SDK文档",
      "id": "5871b905"
    },
    {
      "level": 1,
      "text": "安装黄反识别服务 Java SDK",
      "id": "ef3cf8c9"
    },
    {
      "level": 1,
      "text": "快速入门",
      "id": "ad6c2f3f"
    },
    {
      "level": 2,
      "text": "新建AipAntipornClient",
      "id": "79d32dde"
    },
    {
      "level": 2,
      "text": "配置AipAntipornClient",
      "id": "dcc20f0f"
    },
    {
      "level": 1,
      "text": "错误信息格式",
      "id": "bb496112"
    },
    {
      "level": 1,
      "text": "黄反识别",
      "id": "0e42f851"
    },
    {
      "level": 1,
      "text": "GIF色情图像识别",
      "id": "d29b2e66"
    },
    {
      "level": 1,
      "text": "版本更新记录",
      "id": "18701ee7"
    }
  ]
}
