{
  "html": "<h1 id=\"c23ced4d\">简介</h1><h2 id=\"e7eecf09\">概念解释</h2><p>对本文中将提到的名词约定如下：</p><p><strong>语音识别（Automatic Speech Recognition，ASR）</strong>：也被称为自动语音识别，其目标是将人类的语音中的词汇内容转换为计算机可读的输入，例如按键、二进制编码或者字符序列。</p><p><strong>自然语言理解（Natural Language Understanding，NLU）</strong>： 俗称人机对话，人工智能的分支学科。研究用电子计算机模拟人的语言交际过程，使计算机能理解和运用人类社会的自然语言如汉语、英语等，实现人机之间的自然语言通信，以代替人的部分脑力劳动，包括查询资料、解答问题、摘录文献、汇编资料以及一切有关自然语言信息的加工处理。</p><p><strong>语音SDK（Baidu Voice Recognition Client， BDVRClient）</strong>：即百度语音在线识别SDKAndroid版开发包， BDVRClient是一个封装了语音采集、处理、网络收发等功能的语音识别解决方案。使用BDVRClient可以在应用程序中快速集成语音识别功能。</p><h2 id=\"c94f14f9\">功能介绍</h2><p>BDVRClient是运行在Android 平台的一体化语音识别解决方案，以JAR包 + SO库的形式发布，BDVRClient支持下列功能：</p><ul><li>语音识别控件：集成提示音、音量反馈动效整套交互的对话框控件，方便开发者快速集成；</li><li>基本功能：录音，语音数据处理，端点检测、网络通讯和状态通知，返回识别结果；</li><li>播放提示音：在录音前后播放提示音，优化用户体验；</li><li>监听语音能量：实时反馈用户当前说话声音能量强度；</li><li>语义理解：将语音识别成领域相关的语义结果。</li></ul><h2 id=\"a8e00533\">兼容性</h2><ul><li>系统：支持Android 2.3（API Level 9）及以上系统。需要开发者通过minSdkVersion来保证支持系统的检测。</li><li>机型：手机和平板均可。</li><li>构架：支持ARM平台、x86平台。</li><li>硬件要求：要求设备上有麦克风。</li><li>网络：支持WIFI及移动网络，支持2G、3G、4G移动网络。</li></ul><h2 id=\"f4811587\">开发包说明</h2><table><thead><tr><th style=\"text-align:left\">文件/文件夹名</th><th style=\"text-align:left\">说明</th></tr></thead><tbody><tr><td style=\"text-align:left\">/libs/</td><td style=\"text-align:left\">语音识别SDK lib库，包括各平台的SO库及Jar，SO库开发者可以按需集成</td></tr><tr><td style=\"text-align:left\">/res/raw/</td><td style=\"text-align:left\">语音识别对话框音效文件，如果不使用对话框可以不集成</td></tr><tr><td style=\"text-align:left\">/docs/</td><td style=\"text-align:left\">JAVADOC</td></tr><tr><td style=\"text-align:left\">百度语音在线识别SDK Android版开发手册</td><td style=\"text-align:left\">本手册</td></tr><tr><td style=\"text-align:left\">百度语义解析协议</td><td style=\"text-align:left\">语义理解意图表示说明</td></tr><tr><td style=\"text-align:left\">/VoiceRecognitionDemo/</td><td style=\"text-align:left\">Demo工程</td></tr></tbody></table><h1 id=\"283a3b08\">集成指南</h1><p>本章将讲解如何快速地集成BDVRClient到现有应用中。一个完整的Demo请参考开发包中的示例程序VoiceRecognitionDemo。</p><h2 id=\"8caf8948\">创建应用</h2><p>请参考《百度语音开放平台使用指南》创建应用，开通服务并完成个性化设置。</p><h2 id=\"681a0cac\">添加BDVRClient到工程</h2><p>将开发包中的libs目录整体拷贝到工程目录，libs目录包含了各平台的so库，开发者视应用需要可以进行删减。galaxy.jar是百度Android公共基础库，如果项目中还集成了其它百度SDK，如百度地图SDK，在打包过程中出现类似如下的错误信息：</p><pre>\n<code class=\"hljs\" lang=\"\">[2015-10-22 11:02:57 - Dex Loader] Unable to<span class=\"hljs-built_in\"> execute </span>dex: Multiple dex files define <span class=\"hljs-class\">Lcom/baidu/android/common/logging/Configuration;</span>\n[2015-10-22 11:02:57 - VoiceRecognitionDemo] Conversion to Dalvik format failed: Unable to<span class=\"hljs-built_in\"> execute </span>dex: Multiple dex files define <span class=\"hljs-class\">Lcom/baidu/android/common/logging/Configuration;</span></code>\n</pre><p>请将此Jar包移除。</p><p>将开发包中的res目录整体拷贝到工程目录，此文件夹中包含语音识别对话框的音效文件，如果不使用可以忽略。</p><h2 id=\"09a95162\">添加权限</h2><p>在工程AndroidManifest.xml文件中添加如下权限：</p><pre>\n<code class=\"hljs\" lang=\"\">&lt;uses-permissionandroid:<span class=\"hljs-built_in\">name</span>=<span class=\"hljs-string\">\"android.permission.RECORD_AUDIO\"</span>/&gt;\n&lt;uses-permissionandroid:<span class=\"hljs-built_in\">name</span>=<span class=\"hljs-string\">\"android.permission.ACCESS_NETWORK_STATE\"</span>/&gt;\n&lt;uses-permissionandroid:<span class=\"hljs-built_in\">name</span>=<span class=\"hljs-string\">\"android.permission.ACCESS_WIFI_STATE\"</span>/&gt;\n&lt;uses-permissionandroid:<span class=\"hljs-built_in\">name</span>=<span class=\"hljs-string\">\"android.permission.INTERNET\"</span>/&gt;\n&lt;uses-permissionandroid:<span class=\"hljs-built_in\">name</span>=<span class=\"hljs-string\">\"android.permission.READ_PHONE_STATE\"</span>/&gt;</code>\n</pre><p>各权限含义说明：</p><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">用途</th></tr></thead><tbody><tr><td style=\"text-align:left\">android.permission.RECORD_AUDIO</td><td style=\"text-align:left\">允许应用使用麦克风录音</td></tr><tr><td style=\"text-align:left\">android.permission.INTERNET</td><td style=\"text-align:left\">允许应用联网，发送语音数据至服务器，获得识别结果。</td></tr><tr><td style=\"text-align:left\">android.permission.ACCESS_NETWORK_STATE</td><td style=\"text-align:left\">获取当前的网络状态，优化录音及网络参数。</td></tr><tr><td style=\"text-align:left\">android.permission.ACCESS_WIFI_STATE</td><td style=\"text-align:left\">获取当前wifi状态，优化录音及网络参数</td></tr><tr><td style=\"text-align:left\">android.permission.READ_PHONE_STATE</td><td style=\"text-align:left\">获取用户手机的IMEI，用来唯一的标识用户。</td></tr></tbody></table><h2 id=\"37caa798\">Proguard配置</h2><p>如果应用配置了代码混淆，需要在Proguard配置文件增加以下参数：</p><pre>\n<code class=\"hljs\" lang=\"\">-<span class=\"ruby\">keep <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">com</span>.<span class=\"hljs-title\">baidu</span>.<span class=\"hljs-title\">android</span>.**{*;</span>}\n</span>-<span class=\"ruby\">keep <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">com</span>.<span class=\"hljs-title\">baidu</span>.<span class=\"hljs-title\">voicerecognition</span>.<span class=\"hljs-title\">android</span>.**{*;</span>}</span></code>\n</pre><h1 id=\"2f312aba\">重要接口说明</h1><h2 id=\"25f8eb05\">识别器</h2><p>识别器，类名VoiceRecognitionClient，主要用来控制识别进程：设置参数，开始，结束，取消等。</p><h3>创建对象</h3><ul><li><p><strong>说明</strong></p><p>识别器仅支持单例模式，同一时刻只有开启一次识别，已经添加同步机制，线程安全。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\">public VoiceRecognitionClient getInstance(<span class=\"hljs-name\">Context</span> context)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">context</td><td style=\"text-align:left\">上下文环境</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>识别器单例对象。</p></li></ul><h3>设置授权</h3><ul><li><p><strong>说明</strong></p><p>传入创建应用信息时获得的key值，用于注册使用语音服务。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> setTokenApis (<span class=\"hljs-keyword\">String</span> apiKey, <span class=\"hljs-keyword\">String</span> secretKey)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">apiKey</td><td style=\"text-align:left\">开发者在开放平台上注册的apiKey</td></tr><tr><td style=\"text-align:left\">secretKey</td><td style=\"text-align:left\">开发者在开放平台上注册的secretKey</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>无。</p></li></ul><h3>开始识别</h3><ul><li><p><strong>说明</strong></p><p>传入发起本次识别时的配置参数，用于确定该次识别的采样率、识别垂类等。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> startVoiceRecognition(final VoiceClientStatusChangeListener listener, VoiceRecognitionConfig <span class=\"hljs-built_in\">config</span>)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">listener</td><td style=\"text-align:left\">监听器</td></tr><tr><td style=\"text-align:left\">config</td><td style=\"text-align:left\">配置文件</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>错误码。</p></li></ul><h3>说话结束</h3><ul><li><p><strong>说明</strong></p><p>说话结束，调用此接口后，将停止录音，但是已有录音数据将持续识别，直到结果返回。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> speakFinish ()</code>\n</pre><ul><li><p><strong>参数</strong></p><p>无。</p></li><li><p><strong>返回</strong></p><p>无。</p></li></ul><h3>停止识别</h3><ul><li><p><strong>说明</strong></p><p>停止本次识别，调用此接口后，讲停止录音并停止识别，如果有录音数据正在识别，也将被丢弃。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> stopVoiceRecognition ()</code>\n</pre><ul><li><p><strong>参数</strong></p><p>无。</p></li><li><p><strong>返回</strong></p><p>无。</p></li></ul><h3>释放对象</h3><ul><li><p><strong>说明</strong></p><p>释放语音识别器对象及其所占用的资源。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> releaseInstance ()</code>\n</pre><ul><li><p><strong>参数</strong></p><p>无。</p></li><li><p><strong>返回</strong></p><p>无。</p></li></ul><h2 id=\"21804ec4\">识别参数配置器</h2><p>识别参数配置器，类名VoiceRecognitionConfig，主要用来设置各种识别参数。</p><h3>创建识别参数配置器</h3><ul><li><p><strong>说明</strong></p><p>创建识别参数配置器，该配置器将用于传入识别参数。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> VoiceRecognitionConfig()</code>\n</pre><ul><li><p><strong>参数</strong></p><p>无。</p></li><li><p><strong>返回</strong></p><p>识别参数配置器对象。</p></li></ul><h3>设置采样率</h3><ul><li><p><strong>说明</strong></p><p>设置音频数据的采样率，支持8000和16000两种。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setSampleRate</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> rate)</span></span></code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">rate</td><td style=\"text-align:left\">采样率</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>无。</p></li></ul><h3>启用语音识别开始音效</h3><ul><li><p><strong>说明</strong></p><p>启用语音识别开始音效，参数为音效文件的资源ID。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">enableBeginSoundEffect</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> soundResourceId)</span></span></code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">soundResourceId</td><td style=\"text-align:left\">音效文件的资源ID</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>无。</p></li></ul><h3>禁用语音识别开始音效</h3><ul><li><p><strong>说明</strong></p><p>禁用语音识别开始音效。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> disableBeginSoundEffect()</code>\n</pre><ul><li><p><strong>参数</strong></p><p>无。</p></li><li><p><strong>返回</strong></p><p>无。</p></li></ul><h3>启用语音识别结束音效</h3><ul><li><p><strong>说明</strong></p><p>禁用语音识别开始音效。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">enableEndSoundEffect</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> soundResourceId)</span></span></code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">soundResourceId</td><td style=\"text-align:left\">音效文件的资源ID</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>无。</p></li></ul><h3>禁用语音识别结束音效</h3><ul><li><p><strong>说明</strong></p><p>禁用语音识别结束音效。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> disableEndSoundEffect()</code>\n</pre><ul><li><p><strong>参数</strong></p><p>无。</p></li><li><p><strong>返回</strong></p><p>无。</p></li></ul><h3>禁用标点符号</h3><ul><li><p><strong>说明</strong></p><p>禁用标点符号。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> disablePunctuation()</code>\n</pre><ul><li><p><strong>参数</strong></p><p>无。</p></li><li><p><strong>返回</strong></p><p>无。</p></li></ul><h3>启用语义理解</h3><ul><li><p><strong>说明</strong></p><p>启用语义理解功能。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> enableNLU()</code>\n</pre><ul><li><p><strong>参数</strong></p><p>无。</p></li><li><p><strong>返回</strong></p><p>无。</p></li></ul><h3>启用通讯录识别</h3><ul><li><p><strong>说明</strong></p><p>启用通讯录识别。注意：在启用通讯录识别前要求先上传通讯录。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> enableContacts()</code>\n</pre><ul><li><p><strong>参数</strong></p><p>无。</p></li><li><p><strong>返回</strong></p><p>无。</p></li></ul><h3>设置垂直领域</h3><ul><li><strong>说明</strong></li><li><p>设置识别的垂直领域，正确设置该领域有助于提高识别率，支持同时设置多个垂直领域，也支持只设置一个垂直领域，可以根据实际情况自行选择。</p></li><li><p><strong>返回</strong></p><p>无。</p></li><li><p><strong>方法1</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setProp</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span>[] arrayProp)</span></span></code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">arrayProp</td><td style=\"text-align:left\">识别垂类数组</td></tr></tbody></table><ul><li><strong>方法2</strong></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setProp</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> prop)</span></span></code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">prop</td><td style=\"text-align:left\">识别垂类</td></tr></tbody></table><h3>设置资源类型</h3><ul><li><p><strong>说明</strong></p><p>设置资源类型，主要用于区别后处理方式。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> setResourceType(int <span class=\"hljs-class\"><span class=\"hljs-keyword\">type</span>)</span></code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">type</td><td style=\"text-align:left\">资源类型</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>无。</p></li></ul><h3>设置是否使用缺省的录音</h3><ul><li><p><strong>说明</strong></p><p>设置是否使用缺省的录音。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> setUseDefaultAudioSource(<span class=\"hljs-keyword\">boolean</span> useDefaultSource)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">useDefaultSource</td><td style=\"text-align:left\">true：使用；false：不使用</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>无。</p></li></ul><h3>设置语种</h3><ul><li><p><strong>说明</strong></p><p>设置识别的语种。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> setLanguage(<span class=\"hljs-keyword\">String</span> language)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">language</td><td style=\"text-align:left\">语种</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>无。</p></li></ul><h2 id=\"3f81ddb8\">识别状态监听器</h2><p>识别状态监听器，类名VoiceClientStatusChangeListener，是识别状态监听器接口，开发者可以通过实现此接口对识别状态做监听。</p><h3>更新识别状态变化</h3><ul><li><p><strong>说明</strong></p><p>识别状态变化的回调函数。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">void</span> onClientStatusChange(<span class=\"hljs-built_in\">int</span> status, <span class=\"hljs-built_in\">Object</span> obj)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">status</td><td style=\"text-align:left\">识别状态</td></tr><tr><td style=\"text-align:left\">obj</td><td style=\"text-align:left\">识别状态下的返回对象</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>无。</p></li></ul><h3>更新网络状态变化</h3><ul><li><p><strong>说明</strong></p><p>网络状态变化的回调函数，该函数为保留接口，暂未使用。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">void</span> onNetworkStatusChange(<span class=\"hljs-built_in\">int</span> status, <span class=\"hljs-built_in\">Object</span> obj)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">status</td><td style=\"text-align:left\">网络状态</td></tr><tr><td style=\"text-align:left\">obj</td><td style=\"text-align:left\">网络状态下的返回对象</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>无。</p></li></ul><h3>出错</h3><ul><li><p><strong>说明</strong></p><p>出错时的回调函数。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">void</span> onError(<span class=\"hljs-built_in\">int</span> type, <span class=\"hljs-built_in\">Object</span> errorCode)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">type</td><td style=\"text-align:left\">错误类型</td></tr><tr><td style=\"text-align:left\">errorCode</td><td style=\"text-align:left\">错误码</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>无。</p></li></ul><h2 id=\"1390d542\">语音识别对话框</h2><p>使用百度语音在线识别SDK中默认的对话框，可以方便快捷地使用百度语音识别功能。开发者只需要在创建对话框中传入合适的参数，之后注册对话框监听器来接收识别结果即可。</p><h3>创建对话框</h3><ul><li><p><strong>说明</strong></p><p>创建一个语音识别的对话框，创建对话框前需要对要传给对话框的参数做设置。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\">public <span class=\"hljs-keyword\">BaiduASRDialog(Context </span><span class=\"hljs-built_in\">context</span>, <span class=\"hljs-keyword\">Bundle </span>params)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">context</td><td style=\"text-align:left\">应用上下文环境</td></tr><tr><td style=\"text-align:left\">params</td><td style=\"text-align:left\">参数</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>百度语音识别对话框实例。</p></li></ul><h3>设置对话框监听器</h3><ul><li><p><strong>说明</strong></p><p>设置百度语音识别对话框的监听器。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> setDialogRecognitionListener(DialogRecognitionListener listener)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">listener</td><td style=\"text-align:left\">监听器</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>无。</p></li></ul><h3>获取识别结果</h3><ul><li><p><strong>说明</strong></p><p>百度语音识别对话框监听器用来获取识别结果的回调函数。</p></li><li><p><strong>方法</strong></p></li></ul><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> onResults(Bundle results)</code>\n</pre><ul><li><strong>参数</strong></li></ul><table><thead><tr><th style=\"text-align:left\">名称</th><th style=\"text-align:left\">描述</th></tr></thead><tbody><tr><td style=\"text-align:left\">results</td><td style=\"text-align:left\">识别结果</td></tr></tbody></table><ul><li><p><strong>返回</strong></p><p>无。</p></li></ul><h1 id=\"d1703d04\">参数和错误码说明</h1><h2 id=\"1e6b76ee\">识别器参数说明</h2><h3>采样率</h3><p>采样率是在录制音频时需要用到的参数，目前支持的类型如下：</p><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>SAMPLE_RATE_8K</td><td>8000采样率</td></tr><tr><td>SAMPLE_RATE_16K</td><td>16000采样率</td></tr></tbody></table><h3>语种或方言</h3><p>可以通过设置语种或方言，支持不同地域的人做语音识别，支持类型如下：</p><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>LANGUAGE_CHINESE</td><td>中文普通话</td></tr><tr><td>LANGUAGE_CANTONESE</td><td>中文粤语</td></tr><tr><td>LANGUAGE_SICHUAN</td><td>中文四川话</td></tr><tr><td>LANGUAGE_ENGLISH</td><td>英语</td></tr></tbody></table><h3>语言模型垂类</h3><p>在不同的应用场景下使用对应的语言模型垂类，可以有效提升识别率。目前支持的语音模型垂类如下：</p><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>PROP_MUSIC</td><td>音乐</td></tr><tr><td>PROP_VIDEO</td><td>视频</td></tr><tr><td>PROP_APP</td><td>应用</td></tr><tr><td>PROP_WEB</td><td>网页</td></tr><tr><td>PROP_SEARCH</td><td>热词</td></tr><tr><td>PROP_SHOPPING</td><td>购物</td></tr><tr><td>PROP_HEALTH</td><td>健康</td></tr><tr><td>PROP_PHONE</td><td>电话</td></tr><tr><td>PROP_SONG</td><td>歌曲</td></tr><tr><td>PROP_MEDICAL</td><td>医疗</td></tr><tr><td>PROP_CAR</td><td>汽车</td></tr><tr><td>PROP_CATERING</td><td>餐饮</td></tr><tr><td>PROP_FINANCE</td><td>金融</td></tr><tr><td>PROP_GAME</td><td>游戏</td></tr><tr><td>PROP_RECIPES</td><td>菜谱</td></tr><tr><td>PROP_ASSISTANT</td><td>助手</td></tr><tr><td>PROP_MAP</td><td>地图</td></tr><tr><td>PROP_INPUT</td><td>输入</td></tr></tbody></table><h2 id=\"0b061f8c\">开始识别返回错误码说明</h2><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>START_WORK_RESULT_WORKING</td><td>正常启动就绪，可以识别</td></tr><tr><td>START_WORK_RESULT_NET_UNUSABLE</td><td>网络不可用，无法识别</td></tr><tr><td>START_WORK_RESULT_NULL_LISTENER</td><td>监听器位空，无法识别</td></tr><tr><td>START_WORK_RESULT_RECOGNITING</td><td>正在识别，不能开始新任务</td></tr><tr><td>START_WORK_RESULT_RELEASED</td><td>单例已被释放，不能识别</td></tr></tbody></table><h2 id=\"1bafda3b\">出错回调返回错误码说明</h2><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>ERROR_CLIENT_UNKNOWN</td><td>未知错误</td></tr><tr><td>ERROR_CLIENT_NO_SPEECH</td><td>没有检测到语音</td></tr><tr><td>ERROR_CLIENT_TOO_SHORT</td><td>语音太短</td></tr><tr><td>ERROR_CLIENT_WHOLE_PROCESS_TIMEOUT</td><td>识别超时</td></tr><tr><td>ERROR_RECORDER_UNAVAILABLE</td><td>录音设备不可用</td></tr><tr><td>ERROR_RECORDER_INTERCEPTED</td><td>录音被中断</td></tr><tr><td>ERROR_NETWORK_UNUSABLE</td><td>网络不可用</td></tr><tr><td>ERROR_NETWORK_CONNECT_ERROR</td><td>网络连接失败</td></tr><tr><td>ERROR_NETWORK_PARSE_ERROR</td><td>解析错误</td></tr><tr><td>ERROR_SERVER_PARAMETER_ERROR</td><td>参数错误</td></tr><tr><td>ERROR_SERVER_BACKEND _ERROR</td><td>后端错误</td></tr><tr><td>ERROR_SERVER_RECOGNITION_ERROR</td><td>识别错误</td></tr><tr><td>ERROR_SERVER_INVALID_APP_NAME_ERROR</td><td>鉴权失败</td></tr><tr><td>ERROR_SERVER_SPEECH_QUALITY_ERROR</td><td>语音质量未达标，无法识别</td></tr><tr><td>ERROR_SERVER_SPEECH_TOO_LONG_ERROR</td><td>语音过长</td></tr></tbody></table><h2 id=\"5ee15466\">语音识别对话框参数说明</h2><table><thead><tr><th>参数</th><th>说明</th><th>取值</th></tr></thead><tbody><tr><td>PARAM_API_KEY</td><td>用户申请的api_key</td><td>用户从语音官网申请</td></tr><tr><td>PARAM_SECRET_KEY</td><td>用户申请的secret_key</td><td>用户从语音官网申请</td></tr><tr><td>PARAM_PROP</td><td>语言模型垂类选择（单个）</td><td>参见4.1.3</td></tr><tr><td>PARAM_PROP_ARRAY</td><td>语言模型垂类选择（数组）</td><td>参见4.1.3</td></tr><tr><td>PARAM_VAD_LIB</td><td>vad类型选择</td><td>MFE或LWVAD</td></tr><tr><td>PARAM_LANGUAGE</td><td>语种选择</td><td>参见4.1.2</td></tr><tr><td>PARAM_PROPMT_TEXT</td><td>提示语</td><td>用户可自定义</td></tr><tr><td>PARAM_TIPS_TONE_ENABLE</td><td>是否启用过程提示音</td><td>1/0：使用/弃用</td></tr><tr><td>PARAM_START_TONE_ENABLE</td><td>是否启用开始提示音</td><td>1/0：使用/弃用</td></tr><tr><td>PARAM_END_TONE_ENABLE</td><td>是否启用结束提示音</td><td>1/0：使用/弃用</td></tr><tr><td>PARAM_CONTACTS_ENABLE</td><td>是否使用通讯录</td><td>1/0：使用/弃用</td></tr><tr><td>PARAM_PUNCTUATION_ENABLE</td><td>是否使用标点符号</td><td>1/0：使用/弃用</td></tr><tr><td>PARAM_NLU_ENABLE</td><td>是否使用语义解析</td><td>1/0：使用/弃用</td></tr><tr><td>PARAM_IS_VAD</td><td>是否使用vad</td><td>1/0：使用/弃用</td></tr><tr><td>PARAM_IS_COMPRESS</td><td>是否使用压缩</td><td>1/0：使用/弃用</td></tr></tbody></table><h1 id=\"f212a9c0\">完整示例</h1><h2 id=\"8ec740fb\">自调用接口方式示例</h2><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-comment\">// 重写监听器</span>\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyVoiceRecogListener</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title\">VoiceClientStatusChangeListener</span> </span>{\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">onClientStatusChange</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> status, Object obj)</span> </span>{\n        <span class=\"hljs-comment\">// 处理识别状态变化</span>\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">onError</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> errorType, <span class=\"hljs-keyword\">int</span> errorCode)</span> </span>{\n        <span class=\"hljs-comment\">// 处理出错异常</span>\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">onNetworkStatusChange</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> status, Object obj)</span> </span>{\n        <span class=\"hljs-comment\">// 处理网络状态变化</span>\n    }\n}\n<span class=\"hljs-comment\">// 获取识别器对象</span>\nVoiceRecognitionClient mASREngine = VoiceRecognitionClient.getInstance(<span class=\"hljs-keyword\">this</span>);\n<span class=\"hljs-comment\">// 获取授权</span>\nmASREngine.setTokenApis(Constants.API_KEY, Constants.SECRET_KEY);\n<span class=\"hljs-comment\">// 获得参数配置对象</span>\nVoiceRecognitionConfig config = <span class=\"hljs-keyword\">new</span> VoiceRecognitionConfig();\n<span class=\"hljs-comment\">// 为识别器绑定监听器</span>\nMyVoiceRecogListener mListener = <span class=\"hljs-keyword\">new</span> MyVoiceRecogListener();\n<span class=\"hljs-comment\">// 开始识别</span>\n<span class=\"hljs-keyword\">int</span> code = mASREngine.startVoiceRecognition(mListener, config);\n<span class=\"hljs-comment\">// 判断是否正常开始</span>\n<span class=\"hljs-keyword\">if</span> (code != VoiceRecognitionClient.START_WORK_RESULT_WORKING) {\n    <span class=\"hljs-comment\">// 处理出错异常</span>\n}</code>\n</pre><h2 id=\"3f426e47\">语音识别对话框模式示例</h2><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-comment\">// 识别结果</span>\nfinal String recognition_result = <span class=\"hljs-string\">\"\"</span>;\n<span class=\"hljs-comment\">// 参数，其中apiKey和secretKey为必须配置参数，其他根据实际需要配置</span>\nBundle <span class=\"hljs-keyword\">params</span> = <span class=\"hljs-keyword\">new</span> Bundle();\n<span class=\"hljs-comment\">// 配置apkKey</span>\n<span class=\"hljs-keyword\">params</span>.putString(BaiduASRDigitalDialog.PARAM_API_KEY, your_api_key);\n<span class=\"hljs-comment\">// 配置secretKey</span>\n<span class=\"hljs-keyword\">params</span>.putString(BaiduASRDigitalDialog.PARAM_SECRET_KEY, your_secret_key);\n<span class=\"hljs-comment\">// 创建百度语音识别对话框</span>\nBaiduASRDigitalDialog mDialog = <span class=\"hljs-keyword\">new</span> BaiduASRDigitalDialog(<span class=\"hljs-keyword\">this</span>, <span class=\"hljs-keyword\">params</span>);\n<span class=\"hljs-comment\">// 设置对话框回调监听器</span>\nmDialog.setDialogRecognitionListener(<span class=\"hljs-keyword\">new</span> DialogRecognitionListener(){\n    <span class=\"hljs-comment\">// 识别结果处理函数</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">onResults</span>(<span class=\"hljs-params\">Bundle arg0</span>) </span>{\n        ArrayList&lt;String&gt; rs = results != <span class=\"hljs-literal\">null</span> ? results\n                .getStringArrayList(RESULTS_RECOGNITION) : <span class=\"hljs-literal\">null</span>;\n        <span class=\"hljs-keyword\">if</span> (rs != <span class=\"hljs-literal\">null</span> &amp;&amp; rs.size() &gt; <span class=\"hljs-number\">0</span>) {\n            recognition_result = rs.<span class=\"hljs-keyword\">get</span>(<span class=\"hljs-number\">0</span>);\n        }\n    }\n\n});\n<span class=\"hljs-comment\">// 显示对话框</span>\nmDialog.show();</code>\n</pre>",
  "headings": [
    {
      "level": 1,
      "text": "简介",
      "id": "c23ced4d"
    },
    {
      "level": 2,
      "text": "概念解释",
      "id": "e7eecf09"
    },
    {
      "level": 2,
      "text": "功能介绍",
      "id": "c94f14f9"
    },
    {
      "level": 2,
      "text": "兼容性",
      "id": "a8e00533"
    },
    {
      "level": 2,
      "text": "开发包说明",
      "id": "f4811587"
    },
    {
      "level": 1,
      "text": "集成指南",
      "id": "283a3b08"
    },
    {
      "level": 2,
      "text": "创建应用",
      "id": "8caf8948"
    },
    {
      "level": 2,
      "text": "添加BDVRClient到工程",
      "id": "681a0cac"
    },
    {
      "level": 2,
      "text": "添加权限",
      "id": "09a95162"
    },
    {
      "level": 2,
      "text": "Proguard配置",
      "id": "37caa798"
    },
    {
      "level": 1,
      "text": "重要接口说明",
      "id": "2f312aba"
    },
    {
      "level": 2,
      "text": "识别器",
      "id": "25f8eb05"
    },
    {
      "level": 2,
      "text": "识别参数配置器",
      "id": "21804ec4"
    },
    {
      "level": 2,
      "text": "识别状态监听器",
      "id": "3f81ddb8"
    },
    {
      "level": 2,
      "text": "语音识别对话框",
      "id": "1390d542"
    },
    {
      "level": 1,
      "text": "参数和错误码说明",
      "id": "d1703d04"
    },
    {
      "level": 2,
      "text": "识别器参数说明",
      "id": "1e6b76ee"
    },
    {
      "level": 2,
      "text": "开始识别返回错误码说明",
      "id": "0b061f8c"
    },
    {
      "level": 2,
      "text": "出错回调返回错误码说明",
      "id": "1bafda3b"
    },
    {
      "level": 2,
      "text": "语音识别对话框参数说明",
      "id": "5ee15466"
    },
    {
      "level": 1,
      "text": "完整示例",
      "id": "f212a9c0"
    },
    {
      "level": 2,
      "text": "自调用接口方式示例",
      "id": "8ec740fb"
    },
    {
      "level": 2,
      "text": "语音识别对话框模式示例",
      "id": "3f426e47"
    }
  ]
}
