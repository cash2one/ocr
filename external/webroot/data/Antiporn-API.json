{
  "html": "<h1 id=\"67427582\">简介</h1><p>本文档主要针对API开发者，调用AI服务相关的API接口有两种调用方式，两种不同的调用方式采用相同的接口URL，区别在于请求方式和鉴权方法不一样，请求参数和返回结果一致。</p><p><strong>请求消息体格式</strong></p><p>API服务要求使用POST方式调用，Content-Type为application/x-www-form-urlencoded，然后通过urlencode格式化请求体。</p><p><strong>请求返回格式</strong></p><p>API服务均采用JSON格式的消息体作为响应返回的格式。</p><h1 id=\"f095e81d\">调用方式一</h1><h2 id=\"17ad0de5\">请求URL数据格式</h2><p>向API服务地址使用POST发送请求，必须在URL中带上参数：</p><p><strong>access_token:</strong> 必须参数，参考“<a href=\"http://ai.baidu.com/docs#Beginner-Auth\" target=\"_blank\">Access Token获取</a>”。</p><p>POST中参数按照API接口说明调用即可。</p><p>例如黄反识别API，使用HTTPS POST发送：</p><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-symbol\">https:</span>//aip.baidubce.com/<span class=\"hljs-built_in\">rest</span>/<span class=\"hljs-number\">2.0</span>/antiporn/v1/detect?access_token=<span class=\"hljs-number\">24.</span>f9ba9c5241b67688bb4adbed8bc91dec<span class=\"hljs-meta\">.2592000</span><span class=\"hljs-meta\">.1485570332</span><span class=\"hljs-meta\">.282335</span>-<span class=\"hljs-number\">8574074</span></code>\n</pre><p><strong>请求消息体格式</strong></p><p>API服务要求使用POST方式调用，Content-Type为application/x-www-form-urlencoded，然后通过urlencode格式化请求体。</p><p><strong>请求返回格式</strong></p><p>API服务均采用JSON格式的消息体作为响应返回的格式。</p><blockquote><p><strong>说明：</strong>方式一鉴权使用的Access_token必须通过API Key和Secret Key获取。</p></blockquote><h1 id=\"0f21131c\">调用方式二</h1><h2 id=\"8a77f1fe\">请求头域内容</h2><p>黄反识别的API服务需要在请求的HTTP头域中包含以下信息：</p><ul><li>host（必填）</li><li>x-bce-date （必填）</li><li>x-bce-request-id（选填）</li><li>authorization（必填）</li><li>content-type（选填）</li><li>content-length（选填）</li></ul><p>作为示例，以下是一个标准的请求头域内容:</p><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">POST</span> <span class=\"hljs-string\">rest/2.0/antiporn/v1/detect?</span> HTTP/1.1\n<span class=\"hljs-attribute\">accept-encoding</span>: gzip, deflate\n<span class=\"hljs-attribute\">x-bce-date</span>: 2015-03-24T13:02:00Z\n<span class=\"hljs-attribute\">connection</span>: keep-alive\n<span class=\"hljs-attribute\">accept</span>: */*\n<span class=\"hljs-attribute\">host</span>: aip.baidubce.com\n<span class=\"hljs-attribute\">x-bce-request-id</span>: 73c4e74c-3101-4a00-bf44-fe246959c05e\n<span class=\"hljs-attribute\">content-type</span>: application/x-www-form-urlencoded;\n<span class=\"hljs-attribute\">authorization</span>: bce-auth-v1/46bd9968a6194b4bbdf0341f2286ccce/2015-03-24T13:02:00Z/1800/host;x-bce-date/994014d96b0eb26578e039fa053a4f9003425da4bfedf33f4790882fb4c54903</code>\n</pre><blockquote><p><strong>说明：</strong>方式二鉴权使用的<a href=\"https://cloud.baidu.com/doc/Reference/AuthenticationMechanism.html\" target=\"_blank\">API认证机制</a>authorization必须通过百度云的<a href=\"https://cloud.baidu.com/doc/Reference/GetAKSK.html\" target=\"_blank\">AK/SK</a>生成。</p></blockquote><h1 id=\"c9c75022\">错误信息格式</h1><p>若请求错误，服务器将返回的JSON文本包含以下参数：</p><ul><li><p><strong>error_code：</strong>错误码；关于错误码的详细信息请参考“<a href=\"#%E9%80%9A%E7%94%A8%E9%94%99%E8%AF%AF%E7%A0%81\" target=\"_blank\">通用错误码</a>和业务相关错误码”。</p></li><li><p><strong>error_msg：</strong>错误描述信息，帮助理解和解决发生的错误。</p></li></ul><p>例如Access Token失效返回：</p><pre>\n<code class=\"hljs\" lang=\"\">{\n  <span class=\"hljs-attr\">\"error_code\"</span>: <span class=\"hljs-number\">110</span>,\n  <span class=\"hljs-attr\">\"error_msg\"</span>: <span class=\"hljs-string\">\"Access token invalid or no longer valid\"</span>\n}</code>\n</pre><p>需要重新获取新的Access Token再次请求即可。</p><p><strong>Access Token错误码</strong></p><table><thead><tr><th>error_CODE</th><th>error_MSG</th><th>解释</th></tr></thead><tbody><tr><td>100</td><td>Invalid parameter</td><td>无效参数</td></tr><tr><td>110</td><td>Access token invalid or no longer valid</td><td>Access Token过期失效</td></tr></tbody></table><h2 id=\"915073a2\">通用错误码</h2><table><thead><tr><th>错误码</th><th>错误信息</th><th>描述</th></tr></thead><tbody><tr><td>216015</td><td>module closed</td><td>模块关闭</td></tr><tr><td>216100</td><td>invalid param</td><td>非法参数</td></tr><tr><td>216101</td><td>not enough param</td><td>参数数量不够</td></tr><tr><td>216102</td><td>service not support</td><td>业务不支持</td></tr><tr><td>216103</td><td>param too long</td><td>参数太长</td></tr><tr><td>216110</td><td>appid not exist</td><td>APP ID不存在</td></tr><tr><td>216111</td><td>invalid userid</td><td>非法用户ID</td></tr><tr><td>216200</td><td>empty image</td><td>空的图片</td></tr><tr><td>216201</td><td>image format error</td><td>图片格式错误</td></tr><tr><td>216202</td><td>image size error</td><td>图片大小错误</td></tr><tr><td>216300</td><td>db error</td><td>DB错误</td></tr><tr><td>216400</td><td>backend error</td><td>后端系统错误</td></tr><tr><td>216401</td><td>internal error</td><td>内部错误</td></tr><tr><td>216402</td><td>face not found</td><td>没有找到人脸</td></tr><tr><td>216500</td><td>unknown error</td><td>未知错误</td></tr></tbody></table><h1 id=\"6e4756d5\">黄反识别</h1><p><strong>接口描述</strong></p><p>该请求用于鉴定图片的色情度。即对于输入的一张图片（可正常解码，且长宽比适宜），输出图片的色情度。目前支持三个维度：色情、性感、正常。</p><p><strong>调用方式一请求示例</strong></p><ul><li><p>HTTP 方法： POST</p></li><li><p>请求URL：<pre>\n<code class=\"hljs\" lang=\"\">https:<span class=\"hljs-regexp\">//</span>aip.baidubce.com<span class=\"hljs-regexp\">/rest/</span><span class=\"hljs-number\">2.0</span><span class=\"hljs-regexp\">/antiporn/</span>v1<span class=\"hljs-regexp\">/detect</span></code>\n</pre></p></li><li><p>URL参数：<br></p></li></ul><table><thead><tr><th>参数</th><th>值</th></tr></thead><tbody><tr><td>access_token</td><td>通过API Key和Secret Key获取的access_token,参考“<a href=\"http://ai.baidu.com/docs#Beginner-Auth\" target=\"_blank\">Access Token获取</a>”</td></tr></tbody></table><ul><li>Header如下：</li></ul><table><thead><tr><th>参数</th><th>值</th></tr></thead><tbody><tr><td>Content-Type</td><td>application/x-www-form-urlencoded</td></tr></tbody></table><ul><li>Body中数据如下：</li></ul><table><thead><tr><th>参数</th><th>值</th></tr></thead><tbody><tr><td>image</td><td>图像base64编码</td></tr></tbody></table><p><strong>调用方式二请求示例</strong></p><pre>\n<code class=\"hljs\" lang=\"\"><span class=\"hljs-keyword\">POST</span> <span class=\"hljs-string\">/rest/2.0/antiporn/v1/detect</span> HTTP/1.1\n\n<span class=\"http\"><span class=\"hljs-attribute\">x-bce-date</span>: 2016-10-18T02: 20: 01Z,\n<span class=\"hljs-attribute\">host</span>: aip.baidubce.com,\n<span class=\"hljs-attribute\">accept</span>: */*,\n<span class=\"hljs-attribute\">authorization</span>: bce-auth-v1/fbf9f7889585498d8ba8a68da26cbb2e/2016-10-18T02: 20: 01Z/1800/host/6c7cb35358b5c870666d14588af648e8c941a8b2300becd97831803198ee7a6d\n\n<span class=\"mel\"><span class=\"hljs-keyword\">image</span>=%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F4QDKRXhpZgAATU0AK</span></span></code>\n</pre><p><strong>请求参数</strong></p><table><thead><tr><th>参数</th><th>类型</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>image</td><td>string</td><td>是</td><td>图像数据，base64编码。</td></tr></tbody></table><p><strong>返回示例</strong></p><pre>\n<code class=\"hljs\" lang=\"\">resul<span class=\"hljs-variable\">t:</span> [\n    {<span class=\"hljs-string\">\"class_name\"</span>: <span class=\"hljs-string\">\"色情\"</span>, <span class=\"hljs-string\">\"\"</span>probability<span class=\"hljs-comment\">\": 0.014619}，</span>\n    {<span class=\"hljs-string\">\"class_name\"</span>: <span class=\"hljs-string\">\"正常\"</span>, <span class=\"hljs-string\">\"\"</span>probability<span class=\"hljs-comment\">\": 0.171783}，</span>\n    {<span class=\"hljs-string\">\"class_name\"</span>: <span class=\"hljs-string\">\"性感\"</span>, <span class=\"hljs-string\">\"\"</span>probability<span class=\"hljs-comment\">\": 0.813598}</span>\n    ]</code>\n</pre><p><strong>返回参数</strong></p><table><thead><tr><th>字段</th><th>类型</th><th>是否必须</th><th>说明</th></tr></thead><tbody><tr><td>result_num</td><td>uint32</td><td>是</td><td>返回结果数目，即：result数组中元素个数。</td></tr><tr><td>result</td><td>array(array(double))</td><td>是</td><td>结果数组，每项内容对应一个分类维度的结果。</td></tr><tr><td>log_id</td><td>uint64</td><td>是</td><td>请求标识码，随机数，唯一。</td></tr></tbody></table><p>其中元素的每项内容包含以下字段：</p><table><thead><tr><th>字段</th><th>类型</th><th>是否必须</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td>class_name</td><td>string</td><td>是</td><td>分类结果名称</td><td>色情</td></tr><tr><td>probability</td><td>double</td><td>是</td><td>分类结果置信度</td><td>0.89471650123596</td></tr></tbody></table>",
  "headings": [
    {
      "level": 1,
      "text": "简介",
      "id": "67427582"
    },
    {
      "level": 1,
      "text": "调用方式一",
      "id": "f095e81d"
    },
    {
      "level": 2,
      "text": "请求URL数据格式",
      "id": "17ad0de5"
    },
    {
      "level": 1,
      "text": "调用方式二",
      "id": "0f21131c"
    },
    {
      "level": 2,
      "text": "请求头域内容",
      "id": "8a77f1fe"
    },
    {
      "level": 1,
      "text": "错误信息格式",
      "id": "c9c75022"
    },
    {
      "level": 2,
      "text": "通用错误码",
      "id": "915073a2"
    },
    {
      "level": 1,
      "text": "黄反识别",
      "id": "6e4756d5"
    }
  ]
}
