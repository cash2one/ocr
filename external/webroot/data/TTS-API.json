{
  "html": "<h1 id=\"aa249b79\">概念解释</h1><p>对本文中将提到的名词约定如下：</p><p><strong>语音合成：</strong>也被称为文本转换技术（TTS），它是将计算机自己产生的、或外部输入的文字信息转变为可以听得懂的、流利的口语输出的技术。</p><p><strong>应用程序：</strong>在开发中调用了API、具有语音合成功能的产品线产品。</p><p><strong>开发者：</strong>想在应用程序中使用API、正在阅读本文档的开发人员。</p><h1 id=\"5363f6ed\">简介</h1><p>百度语音合成通过REST API的方式给开发者提供一个通用的HTTP接口，基于该接口，开发者可以轻松的获取语音合成能力，本文档描述了使用语音合成服务REST API的方法。</p><h2 id=\"de4045fc\">功能介绍</h2><p>REST API支持对一段文本的合成，其中对于文本格式以及参数有一定的要求。请按照文档中描述进行相应请求操作。</p><p>本文档适用使用HTTP接口的开发人员。</p><h1 id=\"219b612c\">集成指南</h1><h2 id=\"d6e71bd0\">获取 Access Token</h2><p>使用语音识别 REST API 需要获取 Access Token。Access Token 是用户身份验证和授权的凭证，语音识别采用的是Client Credentials授权方式，即采用应用公钥、密钥获取Access Token，适用于任何带server类型应用，通过此授权方式获取Access Token仅可访问平台授权类的接口，详见百度 OAuth 授权“<a href=\"http://developer.baidu.com/wiki/index.php?title=docs/oauth/client\" target=\"_blank\">Client Credentials授权</a>”部分。</p><p>使用Client Credentials获取Access Token需要应用在其服务端发送请求（推荐用POST方法）到百度OAuth2.0授权服务的“ <a href=\"https://openapi.baidu.com/oauth/2.0/token\" target=\"_blank\">https://openapi.baidu.com/oauth/2.0/token</a> ”地址上，并带上以下参数：</p><ul><li>grant_type：必须参数，固定为“client_credentials”；</li><li>client_id：必须参数，应用的 API Key；</li><li>client_secret：必须参数，应用的 Secret Key;</li></ul><p><strong>例如：</strong></p><pre>\n<code class=\"hljs\" lang=\"\">https://openapi.baidu.com/oauth/2.0/token?\ngrant<span class=\"hljs-emphasis\">_type=client_</span>credentials&amp;\nclient_id=Va5yQRHl<span class=\"hljs-strong\">*****</span><span class=\"hljs-emphasis\">***</span>LT0vuXV4&amp;\nclient_secret= 0rDSjzQ20XUj5i<span class=\"hljs-strong\">*****</span><span class=\"hljs-emphasis\">***</span>PQSzr5pVw2&amp;</code>\n</pre><p>响应数据包如下所示，其中“access_token”字段即为请求REST API所需的令牌, 默认情况下，Access Token有效期为一个月，开发者需要对Access Token的有效性进行判断，如果Access Token过期可以重新获取。</p><p><strong>例如：</strong></p><pre>\n<code class=\"hljs\" lang=\"\">    HTTP/1.1 200 OK\n    Content-Type: application/json\n    <span class=\"hljs-keyword\">Cache</span>-Control: <span class=\"hljs-keyword\">no</span>-<span class=\"hljs-keyword\">store</span>\n\n    {\n        <span class=\"hljs-string\">\"access_token\"</span>: <span class=\"hljs-string\">\"1.a6b7dbd428f731035f771b8d********.86400.1292922000-2346678-124328\"</span>,\n        <span class=\"hljs-string\">\"expires_in\"</span>: <span class=\"hljs-number\">86400</span>,\n        <span class=\"hljs-string\">\"refresh_token\"</span>: <span class=\"hljs-string\">\"2.385d55f8615fdfd9edb7c4b********.604800.1293440400-2346678-124328\"</span>,\n        <span class=\"hljs-string\">\"scope\"</span>: <span class=\"hljs-string\">\"public\"</span>,\n        <span class=\"hljs-string\">\"session_key\"</span>: <span class=\"hljs-string\">\"ANXxSNjwQDugf8615Onqeik********CdlLxn\"</span>,\n        <span class=\"hljs-string\">\"session_secret\"</span>: <span class=\"hljs-string\">\"248APxvxjCZ0VEC********aK4oZExMB\"</span>,\n    }</code>\n</pre><p>#API请求方式基本说明</p><p>语音合成接口支持 POST 和 GET两种方式 正式地址：<a href=\"http://tsn.baidu.com/text2audio\" target=\"_blank\">http://tsn.baidu.com/text2audio</a></p><p>##文本上传模式</p><ul><li><p>上传参数</p><p>|参数|可需|描述 | ------------ | ------------ | ------------ | |tex|必填 |合成的文本，使用UTF-8编码，请注意文本长度必须小于1024字节 |lan|必填 |语言选择,填写zh |tok|必填 |开放平台获取到的开发者<a href=\"http://yuyin.baidu.com/docs/tts/135.html#%E8%8E%B7%E5%8F%96%20Access%20Token\" target=\"_blank\">access_token</a> |ctp|必填 |客户端类型选择，web端填写1 |cuid|必填 |用户唯一标识，用来区分用户，填写机器 MAC 地址或 IMEI 码，长度为60以内 |spd|选填 |语速，取值0-9，默认为5中语速 |pit|选填 |音调，取值0-9，默认为5中语调 |vol|选填 |音量，取值0-9，默认为5中音量 |per|选填 |发音人选择，取值0-1, 0为女声，1为男声，默认为女声</p></li></ul><h2 id=\"3765d76d\">GET调用方式</h2><p>将所有的参数都填写到URL地址中，可以通过浏览器可以播放合成的语音结果。</p><pre>\n<code class=\"hljs\" lang=\"\">http://tsn.baidu.com/text2audio?tex=**<span class=\"hljs-strong\">*&amp;lan=zh&amp;cuid=*</span>*<span class=\"hljs-strong\">*&amp;ctp=1&amp;tok=*</span>*<span class=\"hljs-strong\">*</span></code>\n</pre><h2 id=\"096c7f2d\">POST调用方式</h2><p>将文本以及其他参数写入到body里面，利用表单的方式将参数传递到服务端。调用地址为 <a href=\"http://tsn.baidu.com/text2audio\" target=\"_blank\">http://tsn.baidu.com/text2audio</a> , 所有的参数都在body中。body里面的数据为：</p><pre>\n<code class=\"hljs\" lang=\"\">tex=***<span class=\"hljs-variable\">&amp;lan</span>=zh<span class=\"hljs-variable\">&amp;cuid</span>=***<span class=\"hljs-variable\">&amp;ctp</span>=<span class=\"hljs-number\">1</span><span class=\"hljs-variable\">&amp;tok</span>=***</code>\n</pre><p><strong>注意：</strong> 不论是将参数放到URL地址中，还是利用表单的方式放入到http body中，参数都需要经过两次 URLENCODE 操作。如果是直接在浏览器地址栏输入则不需要。</p><h2 id=\"42d54ee6\">下行接口定义</h2><p>如果合成成功，下行数据为二进制语音文件，具体header信息 Content-Type：audio/mp3；如果合成出现错误，则会返回json结果，具体header信息为：Content-Type:application/json。其中sn数据主要用于DEBUG追查问题，如果出现问题，可以提供sn帮助确认问题。</p><p>错误实例为：</p><pre>\n<code class=\"hljs\" lang=\"\">{<span class=\"hljs-attr\">\"err_no\"</span>:<span class=\"hljs-number\">500</span>,<span class=\"hljs-attr\">\"err_msg\"</span>:<span class=\"hljs-string\">\"notsupport.\"</span>,<span class=\"hljs-attr\">\"sn\"</span>:<span class=\"hljs-string\">\"abcdefgh\"</span>,<span class=\"hljs-attr\">\"idx\"</span>:<span class=\"hljs-number\">1</span>}</code>\n</pre><h2 id=\"0fc686c6\">错误码解释</h2><table><thead><tr><th>错误码</th><th>含义</th></tr></thead><tbody><tr><td>500</td><td>不支持输入</td></tr><tr><td>501</td><td>输入参数不正确</td></tr><tr><td>502</td><td>token验证失败</td></tr><tr><td>503</td><td>合成后端错误</td></tr></tbody></table><h1 id=\"06ebfcbc\">注意事项</h1><p>请严格按照文档里描述的参数进行开发。请注意以下几个问题：</p><ol><li><p>合成文本长度必须小于1024字节，如果本文长度较长，可以采用多次请求的方式。切忌不可文本长度超过限制。</p></li><li><p>语音合成 rest api初次申请默认请求数配额 200000次/天，如果默认配额不能满足需求，请申请提高配额。</p></li><li><p>必填字段中，严格按照文档描述中内容填写。</p></li></ol>",
  "headings": [
    {
      "level": 1,
      "text": "概念解释",
      "id": "aa249b79"
    },
    {
      "level": 1,
      "text": "简介",
      "id": "5363f6ed"
    },
    {
      "level": 2,
      "text": "功能介绍",
      "id": "de4045fc"
    },
    {
      "level": 1,
      "text": "集成指南",
      "id": "219b612c"
    },
    {
      "level": 2,
      "text": "获取 Access Token",
      "id": "d6e71bd0"
    },
    {
      "level": 2,
      "text": "GET调用方式",
      "id": "3765d76d"
    },
    {
      "level": 2,
      "text": "POST调用方式",
      "id": "096c7f2d"
    },
    {
      "level": 2,
      "text": "下行接口定义",
      "id": "42d54ee6"
    },
    {
      "level": 2,
      "text": "错误码解释",
      "id": "0fc686c6"
    },
    {
      "level": 1,
      "text": "注意事项",
      "id": "06ebfcbc"
    }
  ]
}
